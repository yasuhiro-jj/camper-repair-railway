{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/PC%20user/OneDrive/Desktop/%E7%A7%BB%E8%A1%8C%E7%94%A8%E3%81%BE%E3%81%A8%E3%82%81%E3%83%95%E3%82%A9%E3%83%AB%E3%83%80%E3%83%BC/udemy-langchain/camper-repair-clean/frontend/lib/api.ts"],"sourcesContent":["/**\n * APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ\n * æ—¢å­˜ã®Flaskãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIã¨é€šä¿¡ã™ã‚‹ãŸã‚ã®é–¢æ•°ç¾¤\n */\n\nimport axios from 'axios';\n\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5002';\n\nconst apiClient = axios.create({\n  baseURL: API_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n  timeout: 60000, // 60ç§’ã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ\n});\n\n// ãƒãƒ£ãƒƒãƒˆAPI\nexport interface ChatMessage {\n  message: string;\n  session_id?: string;\n}\n\nexport interface ChatResponse {\n  answer?: string;\n  response?: string;\n  type?: string;\n  error?: string;\n}\n\nexport const chatApi = {\n  /**\n   * ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡\n   */\n  sendMessage: async (message: string, sessionId?: string): Promise<ChatResponse> => {\n    const response = await apiClient.post<ChatResponse>('/api/unified/chat', {\n      message,\n      session_id: sessionId,\n    });\n    return response.data;\n  },\n\n  /**\n   * ä¼šè©±ã‚’é–‹å§‹\n   */\n  startConversation: async (sessionId?: string): Promise<ChatResponse> => {\n    const response = await apiClient.post<ChatResponse>('/start_conversation', {\n      session_id: sessionId,\n    });\n    return response.data;\n  },\n};\n\n// å·¥å ´ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰API\nexport interface FactoryCase {\n  id: string;\n  title: string;\n  status: string;\n  created_at: string;\n  [key: string]: any;\n}\n\nexport const factoryApi = {\n  /**\n   * æ¡ˆä»¶ä¸€è¦§ã‚’å–å¾—\n   * @param status ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰\n   * @param partnerPageId ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼å·¥å ´ã®Notion Page IDï¼ˆæŒ‡å®šã•ã‚ŒãŸå ´åˆã€ãã®å·¥å ´ã«ç´¹ä»‹ã•ã‚ŒãŸæ¡ˆä»¶ã®ã¿å–å¾—ï¼‰\n   */\n  getCases: async (status?: string, partnerPageId?: string): Promise<FactoryCase[]> => {\n    try {\n      const params: Record<string, string> = {};\n      if (status) params.status = status;\n      if (partnerPageId) params.partner_page_id = partnerPageId;\n      \n      const response = await apiClient.get<{ success: boolean; cases: FactoryCase[] }>('/admin/api/cases', { params });\n      \n      if (response.data.success && response.data.cases) {\n        return response.data.cases;\n      }\n      \n      // äº’æ›æ€§ã®ãŸã‚ã€casesãŒç›´æ¥é…åˆ—ã®å ´åˆã‚‚å¯¾å¿œ\n      if (Array.isArray(response.data)) {\n        return response.data;\n      }\n      \n      return [];\n    } catch (error: any) {\n      console.error('æ¡ˆä»¶å–å¾—APIã‚¨ãƒ©ãƒ¼:', error);\n      if (error.response) {\n        console.error('ãƒ¬ã‚¹ãƒãƒ³ã‚¹:', error.response.data);\n        console.error('ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:', error.response.status);\n      }\n      throw error;\n    }\n  },\n\n  /**\n   * æ¡ˆä»¶ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ›´æ–°\n   */\n  updateCaseStatus: async (pageId: string, status: string): Promise<void> => {\n    await apiClient.post('/admin/api/update-status', {\n      page_id: pageId,\n      status,\n    });\n  },\n\n  /**\n   * ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¿½åŠ \n   */\n  addComment: async (pageId: string, comment: string): Promise<void> => {\n    await apiClient.post('/admin/api/add-comment', {\n      page_id: pageId,\n      comment,\n    });\n  },\n};\n\n// ä½œæ¥­ãƒãƒ‹ãƒ¥ã‚¢ãƒ«DB API\nexport interface Manual {\n  id: string;\n  manual_id?: string;\n  title?: string;\n  category?: string;\n  difficulty?: string;\n  steps?: string;\n  parts?: string;\n  time_estimate?: string;\n  [key: string]: any;\n}\n\nexport const manualApi = {\n  /**\n   * ä½œæ¥­ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã‚’æ¤œç´¢\n   * @param query æ¤œç´¢ã‚¯ã‚¨ãƒª\n   * @param category ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰\n   * @param difficulty é›£æ˜“åº¦ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰\n   * @param limit æœ€å¤§å–å¾—ä»¶æ•°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 10ï¼‰\n   */\n  searchManuals: async (\n    query: string,\n    category?: string,\n    difficulty?: string,\n    limit: number = 10\n  ): Promise<{ manuals: Manual[]; count: number }> => {\n    try {\n      const response = await apiClient.post<{\n        manuals: Manual[];\n        count: number;\n        query: string;\n        filters: { category?: string; difficulty?: string };\n      }>('/api/factory/manual/search', {\n        query,\n        category: category || '',\n        difficulty: difficulty || '',\n        limit,\n      });\n\n      return {\n        manuals: response.data.manuals || [],\n        count: response.data.count || 0,\n      };\n    } catch (error: any) {\n      console.error('ä½œæ¥­ãƒãƒ‹ãƒ¥ã‚¢ãƒ«æ¤œç´¢APIã‚¨ãƒ©ãƒ¼:', error);\n      if (error.response) {\n        console.error('ãƒ¬ã‚¹ãƒãƒ³ã‚¹:', error.response.data);\n        console.error('ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:', error.response.status);\n      }\n      throw error;\n    }\n  },\n\n  /**\n   * ãƒãƒ‹ãƒ¥ã‚¢ãƒ«è©³ç´°ã‚’å–å¾—\n   * @param manualId ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ID\n   */\n  getManualDetail: async (manualId: string): Promise<Manual> => {\n    try {\n      const response = await apiClient.get<Manual>(`/api/factory/manual/${manualId}`);\n      return response.data;\n    } catch (error: any) {\n      console.error('ãƒãƒ‹ãƒ¥ã‚¢ãƒ«è©³ç´°å–å¾—APIã‚¨ãƒ©ãƒ¼:', error);\n      throw error;\n    }\n  },\n};\n\n// å·¥å ´ãƒãƒƒãƒãƒ³ã‚°APIï¼ˆãƒ•ã‚§ãƒ¼ã‚º4-1ï¼‰\nexport interface CaseInfo {\n  category?: string;\n  user_message?: string;\n  customer_location?: string;\n  prefecture?: string;\n}\n\nexport interface MatchedFactory {\n  factory_id: string;\n  name: string;\n  prefecture: string;\n  specialties: string[];\n  matching_score: number;\n  score_details: {\n    location_score: number;\n    specialty_score: number;\n    workload_score: number;\n    rating_score: number;\n    total_score: number;\n  };\n  [key: string]: any;\n}\n\nexport const factoryMatchingApi = {\n  /**\n   * æ¡ˆä»¶ã«æœ€é©ãªå·¥å ´ã‚’ãƒãƒƒãƒãƒ³ã‚°\n   */\n  matchFactories: async (\n    caseInfo: CaseInfo,\n    maxResults: number = 5\n  ): Promise<MatchedFactory[]> => {\n    try {\n      const response = await apiClient.post<{\n        success: boolean;\n        matched_factories: MatchedFactory[];\n        count: number;\n      }>('/api/v1/factories/match', {\n        case: caseInfo,\n        max_results: maxResults,\n      });\n\n      if (response.data.success && response.data.matched_factories) {\n        return response.data.matched_factories;\n      }\n\n      return [];\n    } catch (error: any) {\n      console.error('å·¥å ´ãƒãƒƒãƒãƒ³ã‚°APIã‚¨ãƒ©ãƒ¼:', error);\n      throw error;\n    }\n  },\n\n  /**\n   * æ¡ˆä»¶ã‚’è‡ªå‹•çš„ã«æœ€é©ãªå·¥å ´ã«å‰²ã‚Šå½“ã¦\n   */\n  autoAssignCase: async (\n    caseId: string,\n    caseInfo: CaseInfo\n  ): Promise<MatchedFactory | null> => {\n    try {\n      const response = await apiClient.post<{\n        success: boolean;\n        assigned_factory?: MatchedFactory;\n        error?: string;\n      }>(`/api/v1/cases/${caseId}/auto-assign`, {\n        case: caseInfo,\n      });\n\n      if (response.data.success && response.data.assigned_factory) {\n        return response.data.assigned_factory;\n      }\n\n      return null;\n    } catch (error: any) {\n      console.error('æ¡ˆä»¶è‡ªå‹•å‰²ã‚Šå½“ã¦APIã‚¨ãƒ©ãƒ¼:', error);\n      throw error;\n    }\n  },\n};\n\n// ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ä¿®ç†åº—APIï¼ˆãƒ•ã‚§ãƒ¼ã‚º4-2ï¼‰\nexport interface PartnerShop {\n  shop_id: string;\n  name: string;\n  phone: string;\n  email: string;\n  prefecture: string;\n  address: string;\n  specialties: string[];\n  business_hours: string;\n  initial_diagnosis_fee: number;\n  success_rate: number;\n  total_referrals: number;\n  total_deals: number;\n  status: string;\n  line_notification: boolean;\n  line_webhook_url?: string;\n  line_bot_id?: string;\n  line_user_id?: string;\n  page_id: string;\n  // è©•ä¾¡é–¢é€£\n  avg_rating?: number;\n  review_count?: number;\n  repair_count?: number;\n  total_repair_amount?: number;\n  latest_review_date?: string;\n  [key: string]: any;\n}\n\nexport interface Deal {\n  deal_id: string;\n  customer_name: string;\n  phone: string;\n  email?: string;\n  prefecture: string;\n  symptom_category: string;\n  symptom_detail: string;\n  partner_page_ids: string[];\n  inquiry_date: string;\n  status: string;\n  deal_date?: string;\n  deal_amount: number;\n  commission_rate: number;\n  commission_amount: number;\n  payment_status: string;\n  notes?: string;\n  page_id: string;\n  [key: string]: any;\n}\n\nexport interface InquiryFormData {\n  customer_name: string;\n  phone: string;\n  email?: string;\n  prefecture: string;\n  symptom_category: string;\n  symptom_detail: string;\n  partner_page_id: string;\n  notification_method?: 'email' | 'line'; // é€šçŸ¥æ–¹æ³•: ãƒ¡ãƒ¼ãƒ«ã€LINE\n  line_user_id?: string; // LINEé€šçŸ¥ã‚’å¸Œæœ›ã™ã‚‹å ´åˆã®LINEãƒ¦ãƒ¼ã‚¶ãƒ¼ID\n}\n\n// ãŠå®¢æ§˜ã‹ã‚‰ã®å‚™è€ƒè¿½åŠ API\nexport const customerNoteApi = {\n  async addNote(dealId: string, note: string): Promise<{ success: boolean; message?: string; error?: string }> {\n    const response = await axios.post(`${API_BASE_URL}/v1/deals/${dealId}/customer-notes`, {\n      note: note\n    });\n    return response.data;\n  }\n};\n\nexport const partnerShopApi = {\n  /**\n   * ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ä¿®ç†åº—ä¸€è¦§ã‚’å–å¾—\n   */\n  getShops: async (\n    status?: string,\n    prefecture?: string,\n    specialty?: string\n  ): Promise<PartnerShop[]> => {\n    try {\n      const params: any = {};\n      if (status) params.status = status;\n      if (prefecture) params.prefecture = prefecture;\n      if (specialty) params.specialty = specialty;\n\n      const response = await apiClient.get<{\n        shops: PartnerShop[];\n        count: number;\n      }>('/api/v1/partner-shops', { params });\n\n      return response.data.shops || [];\n    } catch (error: any) {\n      console.error('ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ä¿®ç†åº—ä¸€è¦§å–å¾—ã‚¨ãƒ©ãƒ¼:', error);\n      // æ¥ç¶šã‚¨ãƒ©ãƒ¼ã®å ´åˆã¯ã‚ˆã‚Šè©³ç´°ãªæƒ…å ±ã‚’æä¾›\n      if (error.code === 'ECONNREFUSED' || error.message?.includes('Network Error')) {\n        const connectionError = new Error('ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒãƒ¼ã«æ¥ç¶šã§ãã¾ã›ã‚“ã€‚ã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚');\n        (connectionError as any).code = error.code;\n        throw connectionError;\n      }\n      throw error;\n    }\n  },\n\n  /**\n   * ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ä¿®ç†åº—è©³ç´°ã‚’å–å¾—\n   */\n  getShop: async (shopId: string): Promise<PartnerShop | null> => {\n    try {\n      const response = await apiClient.get<PartnerShop>(\n        `/api/v1/partner-shops/${shopId}`\n      );\n      return response.data;\n    } catch (error: any) {\n      console.error('ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ä¿®ç†åº—å–å¾—ã‚¨ãƒ©ãƒ¼:', error);\n      return null;\n    }\n  },\n};\n\nexport const dealApi = {\n  /**\n   * å•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ ã‚’é€ä¿¡ï¼ˆå•†è«‡ä½œæˆï¼‰\n   */\n  submitInquiry: async (formData: InquiryFormData): Promise<Deal> => {\n    try {\n      const response = await apiClient.post<{\n        success: boolean;\n        deal: Deal;\n        message: string;\n      }>('/api/v1/deals', formData);\n\n      if (response.data.success && response.data.deal) {\n        return response.data.deal;\n      }\n\n      throw new Error(response.data.message || 'å•ã„åˆã‚ã›ã®é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸ');\n    } catch (error: any) {\n      console.error('å•ã„åˆã‚ã›é€ä¿¡ã‚¨ãƒ©ãƒ¼:', error);\n      throw error;\n    }\n  },\n\n  /**\n   * å•†è«‡ä¸€è¦§ã‚’å–å¾—\n   */\n  getDeals: async (\n    status?: string,\n    partnerPageId?: string\n  ): Promise<Deal[]> => {\n    try {\n      const params: any = {};\n      if (status) params.status = status;\n      if (partnerPageId) params.partner_page_id = partnerPageId;\n\n      const response = await apiClient.get<{\n        deals: Deal[];\n        count: number;\n      }>('/api/v1/deals', { params });\n\n      return response.data.deals || [];\n    } catch (error: any) {\n      console.error('å•†è«‡ä¸€è¦§å–å¾—ã‚¨ãƒ©ãƒ¼:', error);\n      throw error;\n    }\n  },\n\n  /**\n   * å•†è«‡ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ›´æ–°\n   */\n  updateStatus: async (\n    dealId: string,\n    status: string\n  ): Promise<Deal> => {\n    try {\n      const response = await apiClient.patch<{\n        success: boolean;\n        deal: Deal;\n      }>(`/api/v1/deals/${dealId}/status`, { status });\n\n      if (response.data.success && response.data.deal) {\n        return response.data.deal;\n      }\n\n      throw new Error('ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ');\n    } catch (error: any) {\n      console.error('ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°ã‚¨ãƒ©ãƒ¼:', error);\n      throw error;\n    }\n  },\n\n  /**\n   * æˆç´„é‡‘é¡ã‚’æ›´æ–°\n   */\n  updateAmount: async (\n    dealId: string,\n    dealAmount: number,\n    commissionRate?: number\n  ): Promise<Deal> => {\n    try {\n      const response = await apiClient.patch<{\n        success: boolean;\n        deal: Deal;\n      }>(`/api/v1/deals/${dealId}/amount`, {\n        deal_amount: dealAmount,\n        commission_rate: commissionRate,\n      });\n\n      if (response.data.success && response.data.deal) {\n        return response.data.deal;\n      }\n\n      throw new Error('æˆç´„é‡‘é¡æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ');\n    } catch (error: any) {\n      console.error('æˆç´„é‡‘é¡æ›´æ–°ã‚¨ãƒ©ãƒ¼:', error);\n      throw error;\n    }\n  },\n};\n\n// ç®¡ç†è€…API\nexport interface FileInfo {\n  name: string;\n  size: string;\n}\n\nexport interface SystemInfo {\n  dbStatus: string;\n  docCount: number;\n}\n\nexport interface Builder {\n  id: string;\n  name: string;\n  prefecture: string;\n  address: string;\n  phone: string;\n  email: string;\n  status: string;\n}\n\nexport const adminApi = {\n  /**\n   * ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’å†æ§‹ç¯‰\n   */\n  reloadDatabase: async (): Promise<{ success: boolean; message?: string; error?: string }> => {\n    const response = await apiClient.post('/reload_data');\n    return response.data;\n  },\n\n  /**\n   * ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§ã‚’å–å¾—\n   */\n  getFileList: async (): Promise<FileInfo[]> => {\n    try {\n      const response = await apiClient.get('/api/admin/files');\n      return response.data.files || [];\n    } catch (error) {\n      console.error('ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§å–å¾—ã‚¨ãƒ©ãƒ¼:', error);\n      return [];\n    }\n  },\n\n  /**\n   * ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±ã‚’å–å¾—\n   */\n  getSystemInfo: async (): Promise<SystemInfo> => {\n    try {\n      const response = await apiClient.get('/api/admin/system-info');\n      return response.data;\n    } catch (error) {\n      console.error('ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±å–å¾—ã‚¨ãƒ©ãƒ¼:', error);\n      return {\n        dbStatus: 'ã‚¨ãƒ©ãƒ¼',\n        docCount: 0,\n      };\n    }\n  },\n\n  /**\n   * ãƒ“ãƒ«ãƒ€ãƒ¼ä¸€è¦§ã‚’å–å¾—\n   */\n  getBuilders: async (): Promise<Builder[]> => {\n    try {\n      const response = await apiClient.get('/api/v1/builders');\n      return response.data.builders || [];\n    } catch (error) {\n      console.error('ãƒ“ãƒ«ãƒ€ãƒ¼ä¸€è¦§å–å¾—ã‚¨ãƒ©ãƒ¼:', error);\n      throw error;\n    }\n  },\n\n  /**\n   * å·¥å ´ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æƒ…å ±ã‚’å–å¾—\n   */\n  getFactoryNetwork: async () => {\n    try {\n      const response = await apiClient.get('/api/admin/factory-network');\n      return response.data;\n    } catch (error) {\n      console.error('å·¥å ´ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æƒ…å ±å–å¾—ã‚¨ãƒ©ãƒ¼:', error);\n      return { factories: [] };\n    }\n  },\n\n  /**\n   * ãƒˆãƒ©ãƒ–ãƒ«å‚¾å‘åˆ†æã‚’å–å¾—\n   */\n  getAnalytics: async () => {\n    try {\n      const response = await apiClient.get('/api/admin/analytics');\n      return response.data;\n    } catch (error) {\n      console.error('ãƒˆãƒ©ãƒ–ãƒ«å‚¾å‘åˆ†æå–å¾—ã‚¨ãƒ©ãƒ¼:', error);\n      return { trends: [] };\n    }\n  },\n};\n\n// å·¥è³ƒæ¨å®šAPIï¼ˆãƒ•ã‚§ãƒ¼ã‚º4-4ï¼‰\nexport interface CostEstimationRequest {\n  symptoms: string;\n  category?: string;\n  vehicle_info?: string;\n}\n\nexport interface CostEstimation {\n  estimated_work_hours: number;\n  difficulty: string;\n  labor_cost_min: number;\n  labor_cost_max: number;\n  parts_cost_min: number;\n  parts_cost_max: number;\n  diagnosis_fee: number;\n  total_cost_min: number;\n  total_cost_max: number;\n  reasoning: string;\n  similar_cases_count?: number;\n  similar_cases_avg_cost?: number;\n}\n\nexport const costEstimationApi = {\n  /**\n   * å·¥è³ƒã‚’æ¨å®š\n   */\n  estimateCost: async (request: CostEstimationRequest): Promise<CostEstimation> => {\n    try {\n      const response = await apiClient.post<{\n        success: boolean;\n        estimation: CostEstimation;\n        error?: string;\n      }>('/api/v1/cost-estimation', request);\n\n      if (response.data.success && response.data.estimation) {\n        return response.data.estimation;\n      }\n\n      throw new Error(response.data.error || 'å·¥è³ƒæ¨å®šã«å¤±æ•—ã—ã¾ã—ãŸ');\n    } catch (error: any) {\n      console.error('å·¥è³ƒæ¨å®šAPIã‚¨ãƒ©ãƒ¼:', error);\n      throw error;\n    }\n  },\n};\n\n// è¨ºæ–­API\nexport interface DiagnosticRequest {\n  message: string;\n  category?: string;\n}\n\nexport interface DiagnosticResponse {\n  response: string;\n  type?: string;\n  rag_results?: any;\n  notion_results?: any;\n  error?: string;\n}\n\nexport const diagnosticApi = {\n  /**\n   * ç—‡çŠ¶ã‚’è¨ºæ–­\n   */\n  diagnose: async (request: DiagnosticRequest): Promise<DiagnosticResponse> => {\n    try {\n      const response = await apiClient.post<DiagnosticResponse>('/api/unified/chat', {\n        message: request.message,\n        mode: 'diagnostic',\n        include_serp: false,\n      });\n\n      if (response.data.error) {\n        throw new Error(response.data.error);\n      }\n\n      return response.data;\n    } catch (error: any) {\n      console.error('è¨ºæ–­APIã‚¨ãƒ©ãƒ¼:', error);\n      throw error;\n    }\n  },\n};\n\n// è©•ä¾¡API\nexport interface Review {\n  review_id: string;\n  deal_id: string;\n  partner_page_id: string;\n  customer_name: string;\n  star_rating: number;\n  comment: string;\n  review_date: string;\n  status: string;\n  anonymous: boolean;\n  [key: string]: any;\n}\n\nexport interface CreateReviewRequest {\n  deal_id: string;\n  partner_page_id: string;\n  customer_name: string;\n  star_rating: number;\n  comment?: string;\n  anonymous?: boolean;\n}\n\nexport const reviewApi = {\n  /**\n   * è©•ä¾¡ã‚’ä½œæˆ\n   */\n  createReview: async (\n    dealId: string,\n    partnerPageId: string,\n    customerName: string,\n    starRating: number,\n    comment: string = '',\n    anonymous: boolean = false\n  ): Promise<Review> => {\n    try {\n      const response = await apiClient.post<{\n        success: boolean;\n        review: Review;\n        error?: string;\n      }>('/api/v1/reviews', {\n        deal_id: dealId,\n        partner_page_id: partnerPageId,\n        customer_name: customerName,\n        star_rating: starRating,\n        comment: comment,\n        anonymous: anonymous,\n      });\n\n      if (response.data.success && response.data.review) {\n        return response.data.review;\n      }\n\n      throw new Error(response.data.error || 'è©•ä¾¡ã®ä½œæˆã«å¤±æ•—ã—ã¾ã—ãŸ');\n    } catch (error: any) {\n      console.error('è©•ä¾¡ä½œæˆAPIã‚¨ãƒ©ãƒ¼:', error);\n      if (error.response?.data?.error) {\n        throw new Error(error.response.data.error);\n      }\n      throw error;\n    }\n  },\n\n  /**\n   * è©•ä¾¡ä¸€è¦§ã‚’å–å¾—\n   */\n  getReviews: async (\n    partnerPageId?: string,\n    status?: string,\n    limit: number = 20\n  ): Promise<Review[]> => {\n    try {\n      const params: any = {};\n      if (partnerPageId) params.partner_page_id = partnerPageId;\n      if (status) params.status = status;\n      params.limit = limit;\n\n      const response = await apiClient.get<{\n        success: boolean;\n        reviews: Review[];\n        count: number;\n      }>('/api/v1/reviews', { params });\n\n      if (response.data.success && response.data.reviews) {\n        return response.data.reviews;\n      }\n\n      return [];\n    } catch (error: any) {\n      console.error('è©•ä¾¡ä¸€è¦§å–å¾—APIã‚¨ãƒ©ãƒ¼:', error);\n      throw error;\n    }\n  },\n};\n\nexport default apiClient;\n\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;;;;;;;;;;;;;;;;;;;;AAIe;AAFhB;;AAEA,MAAM,UAAU,6DAAmC;AAEnD,MAAM,YAAY,mJAAK,CAAC,MAAM,CAAC;IAC7B,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;IACA,SAAS;AACX;AAeO,MAAM,UAAU;IACrB;;GAEC,GACD,aAAa,OAAO,SAAiB;QACnC,MAAM,WAAW,MAAM,UAAU,IAAI,CAAe,qBAAqB;YACvE;YACA,YAAY;QACd;QACA,OAAO,SAAS,IAAI;IACtB;IAEA;;GAEC,GACD,mBAAmB,OAAO;QACxB,MAAM,WAAW,MAAM,UAAU,IAAI,CAAe,uBAAuB;YACzE,YAAY;QACd;QACA,OAAO,SAAS,IAAI;IACtB;AACF;AAWO,MAAM,aAAa;IACxB;;;;GAIC,GACD,UAAU,OAAO,QAAiB;QAChC,IAAI;YACF,MAAM,SAAiC,CAAC;YACxC,IAAI,QAAQ,OAAO,MAAM,GAAG;YAC5B,IAAI,eAAe,OAAO,eAAe,GAAG;YAE5C,MAAM,WAAW,MAAM,UAAU,GAAG,CAA6C,oBAAoB;gBAAE;YAAO;YAE9G,IAAI,SAAS,IAAI,CAAC,OAAO,IAAI,SAAS,IAAI,CAAC,KAAK,EAAE;gBAChD,OAAO,SAAS,IAAI,CAAC,KAAK;YAC5B;YAEA,0BAA0B;YAC1B,IAAI,MAAM,OAAO,CAAC,SAAS,IAAI,GAAG;gBAChC,OAAO,SAAS,IAAI;YACtB;YAEA,OAAO,EAAE;QACX,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,eAAe;YAC7B,IAAI,MAAM,QAAQ,EAAE;gBAClB,QAAQ,KAAK,CAAC,UAAU,MAAM,QAAQ,CAAC,IAAI;gBAC3C,QAAQ,KAAK,CAAC,UAAU,MAAM,QAAQ,CAAC,MAAM;YAC/C;YACA,MAAM;QACR;IACF;IAEA;;GAEC,GACD,kBAAkB,OAAO,QAAgB;QACvC,MAAM,UAAU,IAAI,CAAC,4BAA4B;YAC/C,SAAS;YACT;QACF;IACF;IAEA;;GAEC,GACD,YAAY,OAAO,QAAgB;QACjC,MAAM,UAAU,IAAI,CAAC,0BAA0B;YAC7C,SAAS;YACT;QACF;IACF;AACF;AAeO,MAAM,YAAY;IACvB;;;;;;GAMC,GACD,eAAe,OACb,OACA,UACA,YACA,QAAgB,EAAE;QAElB,IAAI;YACF,MAAM,WAAW,MAAM,UAAU,IAAI,CAKlC,8BAA8B;gBAC/B;gBACA,UAAU,YAAY;gBACtB,YAAY,cAAc;gBAC1B;YACF;YAEA,OAAO;gBACL,SAAS,SAAS,IAAI,CAAC,OAAO,IAAI,EAAE;gBACpC,OAAO,SAAS,IAAI,CAAC,KAAK,IAAI;YAChC;QACF,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,oBAAoB;YAClC,IAAI,MAAM,QAAQ,EAAE;gBAClB,QAAQ,KAAK,CAAC,UAAU,MAAM,QAAQ,CAAC,IAAI;gBAC3C,QAAQ,KAAK,CAAC,UAAU,MAAM,QAAQ,CAAC,MAAM;YAC/C;YACA,MAAM;QACR;IACF;IAEA;;;GAGC,GACD,iBAAiB,OAAO;QACtB,IAAI;YACF,MAAM,WAAW,MAAM,UAAU,GAAG,CAAS,CAAC,oBAAoB,EAAE,UAAU;YAC9E,OAAO,SAAS,IAAI;QACtB,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,oBAAoB;YAClC,MAAM;QACR;IACF;AACF;AA0BO,MAAM,qBAAqB;IAChC;;GAEC,GACD,gBAAgB,OACd,UACA,aAAqB,CAAC;QAEtB,IAAI;YACF,MAAM,WAAW,MAAM,UAAU,IAAI,CAIlC,2BAA2B;gBAC5B,MAAM;gBACN,aAAa;YACf;YAEA,IAAI,SAAS,IAAI,CAAC,OAAO,IAAI,SAAS,IAAI,CAAC,iBAAiB,EAAE;gBAC5D,OAAO,SAAS,IAAI,CAAC,iBAAiB;YACxC;YAEA,OAAO,EAAE;QACX,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,kBAAkB;YAChC,MAAM;QACR;IACF;IAEA;;GAEC,GACD,gBAAgB,OACd,QACA;QAEA,IAAI;YACF,MAAM,WAAW,MAAM,UAAU,IAAI,CAIlC,CAAC,cAAc,EAAE,OAAO,YAAY,CAAC,EAAE;gBACxC,MAAM;YACR;YAEA,IAAI,SAAS,IAAI,CAAC,OAAO,IAAI,SAAS,IAAI,CAAC,gBAAgB,EAAE;gBAC3D,OAAO,SAAS,IAAI,CAAC,gBAAgB;YACvC;YAEA,OAAO;QACT,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,mBAAmB;YACjC,MAAM;QACR;IACF;AACF;AAiEO,MAAM,kBAAkB;IAC7B,MAAM,SAAQ,MAAc,EAAE,IAAY;QACxC,MAAM,WAAW,MAAM,mJAAK,CAAC,IAAI,CAAC,GAAG,aAAa,UAAU,EAAE,OAAO,eAAe,CAAC,EAAE;YACrF,MAAM;QACR;QACA,OAAO,SAAS,IAAI;IACtB;AACF;AAEO,MAAM,iBAAiB;IAC5B;;GAEC,GACD,UAAU,OACR,QACA,YACA;QAEA,IAAI;YACF,MAAM,SAAc,CAAC;YACrB,IAAI,QAAQ,OAAO,MAAM,GAAG;YAC5B,IAAI,YAAY,OAAO,UAAU,GAAG;YACpC,IAAI,WAAW,OAAO,SAAS,GAAG;YAElC,MAAM,WAAW,MAAM,UAAU,GAAG,CAGjC,yBAAyB;gBAAE;YAAO;YAErC,OAAO,SAAS,IAAI,CAAC,KAAK,IAAI,EAAE;QAClC,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,oBAAoB;YAClC,sBAAsB;YACtB,IAAI,MAAM,IAAI,KAAK,kBAAkB,MAAM,OAAO,EAAE,SAAS,kBAAkB;gBAC7E,MAAM,kBAAkB,IAAI,MAAM;gBACjC,gBAAwB,IAAI,GAAG,MAAM,IAAI;gBAC1C,MAAM;YACR;YACA,MAAM;QACR;IACF;IAEA;;GAEC,GACD,SAAS,OAAO;QACd,IAAI;YACF,MAAM,WAAW,MAAM,UAAU,GAAG,CAClC,CAAC,sBAAsB,EAAE,QAAQ;YAEnC,OAAO,SAAS,IAAI;QACtB,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,kBAAkB;YAChC,OAAO;QACT;IACF;AACF;AAEO,MAAM,UAAU;IACrB;;GAEC,GACD,eAAe,OAAO;QACpB,IAAI;YACF,MAAM,WAAW,MAAM,UAAU,IAAI,CAIlC,iBAAiB;YAEpB,IAAI,SAAS,IAAI,CAAC,OAAO,IAAI,SAAS,IAAI,CAAC,IAAI,EAAE;gBAC/C,OAAO,SAAS,IAAI,CAAC,IAAI;YAC3B;YAEA,MAAM,IAAI,MAAM,SAAS,IAAI,CAAC,OAAO,IAAI;QAC3C,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,eAAe;YAC7B,MAAM;QACR;IACF;IAEA;;GAEC,GACD,UAAU,OACR,QACA;QAEA,IAAI;YACF,MAAM,SAAc,CAAC;YACrB,IAAI,QAAQ,OAAO,MAAM,GAAG;YAC5B,IAAI,eAAe,OAAO,eAAe,GAAG;YAE5C,MAAM,WAAW,MAAM,UAAU,GAAG,CAGjC,iBAAiB;gBAAE;YAAO;YAE7B,OAAO,SAAS,IAAI,CAAC,KAAK,IAAI,EAAE;QAClC,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,cAAc;YAC5B,MAAM;QACR;IACF;IAEA;;GAEC,GACD,cAAc,OACZ,QACA;QAEA,IAAI;YACF,MAAM,WAAW,MAAM,UAAU,KAAK,CAGnC,CAAC,cAAc,EAAE,OAAO,OAAO,CAAC,EAAE;gBAAE;YAAO;YAE9C,IAAI,SAAS,IAAI,CAAC,OAAO,IAAI,SAAS,IAAI,CAAC,IAAI,EAAE;gBAC/C,OAAO,SAAS,IAAI,CAAC,IAAI;YAC3B;YAEA,MAAM,IAAI,MAAM;QAClB,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,eAAe;YAC7B,MAAM;QACR;IACF;IAEA;;GAEC,GACD,cAAc,OACZ,QACA,YACA;QAEA,IAAI;YACF,MAAM,WAAW,MAAM,UAAU,KAAK,CAGnC,CAAC,cAAc,EAAE,OAAO,OAAO,CAAC,EAAE;gBACnC,aAAa;gBACb,iBAAiB;YACnB;YAEA,IAAI,SAAS,IAAI,CAAC,OAAO,IAAI,SAAS,IAAI,CAAC,IAAI,EAAE;gBAC/C,OAAO,SAAS,IAAI,CAAC,IAAI;YAC3B;YAEA,MAAM,IAAI,MAAM;QAClB,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,cAAc;YAC5B,MAAM;QACR;IACF;AACF;AAuBO,MAAM,WAAW;IACtB;;GAEC,GACD,gBAAgB;QACd,MAAM,WAAW,MAAM,UAAU,IAAI,CAAC;QACtC,OAAO,SAAS,IAAI;IACtB;IAEA;;GAEC,GACD,aAAa;QACX,IAAI;YACF,MAAM,WAAW,MAAM,UAAU,GAAG,CAAC;YACrC,OAAO,SAAS,IAAI,CAAC,KAAK,IAAI,EAAE;QAClC,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,gBAAgB;YAC9B,OAAO,EAAE;QACX;IACF;IAEA;;GAEC,GACD,eAAe;QACb,IAAI;YACF,MAAM,WAAW,MAAM,UAAU,GAAG,CAAC;YACrC,OAAO,SAAS,IAAI;QACtB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,gBAAgB;YAC9B,OAAO;gBACL,UAAU;gBACV,UAAU;YACZ;QACF;IACF;IAEA;;GAEC,GACD,aAAa;QACX,IAAI;YACF,MAAM,WAAW,MAAM,UAAU,GAAG,CAAC;YACrC,OAAO,SAAS,IAAI,CAAC,QAAQ,IAAI,EAAE;QACrC,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,gBAAgB;YAC9B,MAAM;QACR;IACF;IAEA;;GAEC,GACD,mBAAmB;QACjB,IAAI;YACF,MAAM,WAAW,MAAM,UAAU,GAAG,CAAC;YACrC,OAAO,SAAS,IAAI;QACtB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,oBAAoB;YAClC,OAAO;gBAAE,WAAW,EAAE;YAAC;QACzB;IACF;IAEA;;GAEC,GACD,cAAc;QACZ,IAAI;YACF,MAAM,WAAW,MAAM,UAAU,GAAG,CAAC;YACrC,OAAO,SAAS,IAAI;QACtB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,kBAAkB;YAChC,OAAO;gBAAE,QAAQ,EAAE;YAAC;QACtB;IACF;AACF;AAwBO,MAAM,oBAAoB;IAC/B;;GAEC,GACD,cAAc,OAAO;QACnB,IAAI;YACF,MAAM,WAAW,MAAM,UAAU,IAAI,CAIlC,2BAA2B;YAE9B,IAAI,SAAS,IAAI,CAAC,OAAO,IAAI,SAAS,IAAI,CAAC,UAAU,EAAE;gBACrD,OAAO,SAAS,IAAI,CAAC,UAAU;YACjC;YAEA,MAAM,IAAI,MAAM,SAAS,IAAI,CAAC,KAAK,IAAI;QACzC,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,eAAe;YAC7B,MAAM;QACR;IACF;AACF;AAgBO,MAAM,gBAAgB;IAC3B;;GAEC,GACD,UAAU,OAAO;QACf,IAAI;YACF,MAAM,WAAW,MAAM,UAAU,IAAI,CAAqB,qBAAqB;gBAC7E,SAAS,QAAQ,OAAO;gBACxB,MAAM;gBACN,cAAc;YAChB;YAEA,IAAI,SAAS,IAAI,CAAC,KAAK,EAAE;gBACvB,MAAM,IAAI,MAAM,SAAS,IAAI,CAAC,KAAK;YACrC;YAEA,OAAO,SAAS,IAAI;QACtB,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,aAAa;YAC3B,MAAM;QACR;IACF;AACF;AAyBO,MAAM,YAAY;IACvB;;GAEC,GACD,cAAc,OACZ,QACA,eACA,cACA,YACA,UAAkB,EAAE,EACpB,YAAqB,KAAK;QAE1B,IAAI;YACF,MAAM,WAAW,MAAM,UAAU,IAAI,CAIlC,mBAAmB;gBACpB,SAAS;gBACT,iBAAiB;gBACjB,eAAe;gBACf,aAAa;gBACb,SAAS;gBACT,WAAW;YACb;YAEA,IAAI,SAAS,IAAI,CAAC,OAAO,IAAI,SAAS,IAAI,CAAC,MAAM,EAAE;gBACjD,OAAO,SAAS,IAAI,CAAC,MAAM;YAC7B;YAEA,MAAM,IAAI,MAAM,SAAS,IAAI,CAAC,KAAK,IAAI;QACzC,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,eAAe;YAC7B,IAAI,MAAM,QAAQ,EAAE,MAAM,OAAO;gBAC/B,MAAM,IAAI,MAAM,MAAM,QAAQ,CAAC,IAAI,CAAC,KAAK;YAC3C;YACA,MAAM;QACR;IACF;IAEA;;GAEC,GACD,YAAY,OACV,eACA,QACA,QAAgB,EAAE;QAElB,IAAI;YACF,MAAM,SAAc,CAAC;YACrB,IAAI,eAAe,OAAO,eAAe,GAAG;YAC5C,IAAI,QAAQ,OAAO,MAAM,GAAG;YAC5B,OAAO,KAAK,GAAG;YAEf,MAAM,WAAW,MAAM,UAAU,GAAG,CAIjC,mBAAmB;gBAAE;YAAO;YAE/B,IAAI,SAAS,IAAI,CAAC,OAAO,IAAI,SAAS,IAAI,CAAC,OAAO,EAAE;gBAClD,OAAO,SAAS,IAAI,CAAC,OAAO;YAC9B;YAEA,OAAO,EAAE;QACX,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,iBAAiB;YAC/B,MAAM;QACR;IACF;AACF;uCAEe"}},
    {"offset": {"line": 455, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/PC%20user/OneDrive/Desktop/%E7%A7%BB%E8%A1%8C%E7%94%A8%E3%81%BE%E3%81%A8%E3%82%81%E3%83%95%E3%82%A9%E3%83%AB%E3%83%80%E3%83%BC/udemy-langchain/camper-repair-clean/frontend/components/Chat/MessageInput.tsx"],"sourcesContent":["'use client';\n\nimport { useState, KeyboardEvent, useRef, useEffect } from 'react';\n\ninterface MessageInputProps {\n  onSend: (message: string) => void;\n  disabled?: boolean;\n}\n\nexport default function MessageInput({ onSend, disabled = false }: MessageInputProps) {\n  const [message, setMessage] = useState('');\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n\n  const handleSend = () => {\n    if (message.trim() && !disabled) {\n      onSend(message.trim());\n      setMessage('');\n      // ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã®é«˜ã•ã‚’ãƒªã‚»ãƒƒãƒˆ\n      if (textareaRef.current) {\n        textareaRef.current.style.height = '44px';\n      }\n    }\n  };\n\n  const handleKeyDown = (e: KeyboardEvent<HTMLTextAreaElement>) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  };\n\n  // ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã®è‡ªå‹•ãƒªã‚µã‚¤ã‚º\n  useEffect(() => {\n    if (textareaRef.current) {\n      textareaRef.current.style.height = '44px';\n      const scrollHeight = textareaRef.current.scrollHeight;\n      if (scrollHeight > 44) {\n        textareaRef.current.style.height = `${Math.min(scrollHeight, 120)}px`;\n      }\n    }\n  }, [message]);\n\n  return (\n    <div className=\"flex gap-2 items-end\">\n      <textarea\n        ref={textareaRef}\n        value={message}\n        onChange={(e) => setMessage(e.target.value)}\n        onKeyDown={handleKeyDown}\n        placeholder=\"ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›...\"\n        disabled={disabled}\n        className=\"flex-1 px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none disabled:bg-gray-100 disabled:cursor-not-allowed text-gray-900\"\n        rows={1}\n        style={{ minHeight: '44px', maxHeight: '120px', overflowY: 'auto' }}\n      />\n      <button\n        onClick={handleSend}\n        disabled={disabled || !message.trim()}\n        className=\"px-5 py-2.5 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors text-sm\"\n      >\n        é€ä¿¡\n      </button>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AASe,SAAS,aAAa,EAAE,MAAM,EAAE,WAAW,KAAK,EAAqB;;IAClF,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,cAAc,IAAA,uKAAM,EAAsB;IAEhD,MAAM,aAAa;QACjB,IAAI,QAAQ,IAAI,MAAM,CAAC,UAAU;YAC/B,OAAO,QAAQ,IAAI;YACnB,WAAW;YACX,kBAAkB;YAClB,IAAI,YAAY,OAAO,EAAE;gBACvB,YAAY,OAAO,CAAC,KAAK,CAAC,MAAM,GAAG;YACrC;QACF;IACF;IAEA,MAAM,gBAAgB,CAAC;QACrB,IAAI,EAAE,GAAG,KAAK,WAAW,CAAC,EAAE,QAAQ,EAAE;YACpC,EAAE,cAAc;YAChB;QACF;IACF;IAEA,iBAAiB;IACjB,IAAA,0KAAS;kCAAC;YACR,IAAI,YAAY,OAAO,EAAE;gBACvB,YAAY,OAAO,CAAC,KAAK,CAAC,MAAM,GAAG;gBACnC,MAAM,eAAe,YAAY,OAAO,CAAC,YAAY;gBACrD,IAAI,eAAe,IAAI;oBACrB,YAAY,OAAO,CAAC,KAAK,CAAC,MAAM,GAAG,GAAG,KAAK,GAAG,CAAC,cAAc,KAAK,EAAE,CAAC;gBACvE;YACF;QACF;iCAAG;QAAC;KAAQ;IAEZ,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBACC,KAAK;gBACL,OAAO;gBACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;gBAC1C,WAAW;gBACX,aAAY;gBACZ,UAAU;gBACV,WAAU;gBACV,MAAM;gBACN,OAAO;oBAAE,WAAW;oBAAQ,WAAW;oBAAS,WAAW;gBAAO;;;;;;0BAEpE,6LAAC;gBACC,SAAS;gBACT,UAAU,YAAY,CAAC,QAAQ,IAAI;gBACnC,WAAU;0BACX;;;;;;;;;;;;AAKP;GAvDwB;KAAA"}},
    {"offset": {"line": 549, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/PC%20user/OneDrive/Desktop/%E7%A7%BB%E8%A1%8C%E7%94%A8%E3%81%BE%E3%81%A8%E3%82%81%E3%83%95%E3%82%A9%E3%83%AB%E3%83%80%E3%83%BC/udemy-langchain/camper-repair-clean/frontend/components/Chat/MessageList.tsx"],"sourcesContent":["'use client';\n\nimport { Message } from '@/types';\nimport MessageInput from './MessageInput';\n\ninterface MessageListProps {\n  messages: Message[];\n  onSend?: (message: string) => void;\n  disabled?: boolean;\n}\n\nconst blogLinks = [\n  {\n    title: 'ğŸ”‹ ã‚­ãƒ£ãƒ³ãƒ”ãƒ³ã‚°ã‚«ãƒ¼ã®ã‚µãƒ–ãƒãƒƒãƒ†ãƒªãƒ¼èµ°è¡Œå……é›»ã‚’å®Œå…¨è§£èª¬',\n    url: 'https://camper-repair.net/blog/',\n  },\n  {\n    title: 'ğŸ”¥ ã‚­ãƒ£ãƒ³ãƒ”ãƒ³ã‚°ã‚«ãƒ¼æ­è¼‰FFãƒ’ãƒ¼ã‚¿ãƒ¼ã®ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹åŸºç¤çŸ¥è­˜',\n    url: 'https://camper-repair.net/blog/',\n  },\n  {\n    title: 'ğŸš— è²·ã£ã¦ã¯ã„ã‘ãªã„ã‚­ãƒ£ãƒ³ãƒ”ãƒ³ã‚°ã‚«ãƒ¼ã¨ã¯ï¼ŸçŠ¶æ…‹ç¢ºèªãŒå¾Œæ‚”ã‚’é˜²ãã‚«ã‚®',\n    url: 'https://camper-repair.net/blog/',\n  },\n];\n\nexport default function MessageList({ messages, onSend, disabled = false }: MessageListProps) {\n  return (\n    <div className={`flex flex-col gap-3 bg-gray-50 rounded-lg border-2 border-gray-200 flex-1 overflow-y-auto mb-0 ${messages.length === 0 ? 'p-3' : 'p-3'}`}>\n      {messages.length === 0 ? (\n        <>\n          <div className=\"text-center text-gray-500 py-2\">\n            <p className=\"text-base mb-2\">ğŸ†• æ–°ã—ã„ä¼šè©±ã‚’é–‹å§‹ã—ã¾ã—ãŸã€‚ä½•ã§ã‚‚ãŠèããã ã•ã„ï¼</p>\n            {onSend && (\n              <div className=\"mt-2\">\n                <MessageInput onSend={onSend} disabled={disabled} />\n              </div>\n            )}\n          </div>\n          \n          {/* ãƒ–ãƒ­ã‚°ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */}\n          <div className=\"bg-white border-l-4 border-purple-600 rounded-lg p-4 mt-4\">\n            <h3 className=\"text-purple-600 font-bold text-base mb-3\">ğŸ“š å²¡å±±ã‚­ãƒ£ãƒ³ãƒ”ãƒ³ã‚°ã‚«ãƒ¼ä¿®ç†ã‚µãƒãƒ¼ãƒˆãƒ–ãƒ­ã‚°</h3>\n            <p className=\"text-gray-600 mb-3 text-sm\">\n              ã‚ˆã‚Šè©³ã—ã„æƒ…å ±ã¯<a href=\"https://camper-repair.net/blog/\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-purple-600 hover:underline font-semibold\">ä¿®ç†ãƒ–ãƒ­ã‚°ä¸€è¦§</a>ã‚’ã”è¦§ãã ã•ã„ã€‚\n            </p>\n            <div className=\"flex flex-col gap-2\">\n              {blogLinks.map((blog, index) => (\n                <a\n                  key={index}\n                  href={blog.url}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"text-purple-600 hover:text-purple-800 hover:underline transition-colors text-sm font-medium\"\n                >\n                  {blog.title}\n                </a>\n              ))}\n            </div>\n          </div>\n        </>\n      ) : (\n        messages.map((message) => {\n          // ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å ´åˆã¯ä¸­å¤®ã«è¡¨ç¤º\n          if (message.sender === 'system') {\n            return (\n              <div key={message.id} className=\"flex justify-center my-3\">\n                <div className=\"max-w-[90%] bg-yellow-50 border border-yellow-200 text-yellow-800 rounded-lg px-4 py-2.5 text-center italic\">\n                  <div className=\"whitespace-pre-wrap break-words\">{message.text}</div>\n                </div>\n              </div>\n            );\n          }\n          \n          return (\n            <div\n              key={message.id}\n              className={`flex ${\n                message.sender === 'user' ? 'justify-end' : 'justify-start'\n              }`}\n            >\n              <div\n                className={`max-w-[80%] rounded-lg px-4 py-2 ${\n                  message.sender === 'user'\n                    ? 'bg-gradient-to-r from-purple-600 to-purple-700 text-white'\n                    : 'bg-white text-gray-800 border border-gray-200 shadow-sm'\n                }`}\n              >\n                <div className=\"whitespace-pre-wrap break-words\">\n                  {message.text}\n                </div>\n                <div\n                  className={`text-xs mt-1 ${\n                    message.sender === 'user' ? 'text-purple-100' : 'text-gray-500'\n                  }`}\n                >\n                  {message.timestamp.toLocaleTimeString('ja-JP', {\n                    hour: '2-digit',\n                    minute: '2-digit',\n                  })}\n                </div>\n              </div>\n            </div>\n          );\n        })\n      )}\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAGA;AAHA;;;AAWA,MAAM,YAAY;IAChB;QACE,OAAO;QACP,KAAK;IACP;IACA;QACE,OAAO;QACP,KAAK;IACP;IACA;QACE,OAAO;QACP,KAAK;IACP;CACD;AAEc,SAAS,YAAY,EAAE,QAAQ,EAAE,MAAM,EAAE,WAAW,KAAK,EAAoB;IAC1F,qBACE,6LAAC;QAAI,WAAW,CAAC,+FAA+F,EAAE,SAAS,MAAM,KAAK,IAAI,QAAQ,OAAO;kBACtJ,SAAS,MAAM,KAAK,kBACnB;;8BACE,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAE,WAAU;sCAAiB;;;;;;wBAC7B,wBACC,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC,iJAAY;gCAAC,QAAQ;gCAAQ,UAAU;;;;;;;;;;;;;;;;;8BAM9C,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAG,WAAU;sCAA2C;;;;;;sCACzD,6LAAC;4BAAE,WAAU;;gCAA6B;8CAChC,6LAAC;oCAAE,MAAK;oCAAkC,QAAO;oCAAS,KAAI;oCAAsB,WAAU;8CAAgD;;;;;;gCAAW;;;;;;;sCAEnK,6LAAC;4BAAI,WAAU;sCACZ,UAAU,GAAG,CAAC,CAAC,MAAM,sBACpB,6LAAC;oCAEC,MAAM,KAAK,GAAG;oCACd,QAAO;oCACP,KAAI;oCACJ,WAAU;8CAET,KAAK,KAAK;mCANN;;;;;;;;;;;;;;;;;2BAaf,SAAS,GAAG,CAAC,CAAC;YACZ,qBAAqB;YACrB,IAAI,QAAQ,MAAM,KAAK,UAAU;gBAC/B,qBACE,6LAAC;oBAAqB,WAAU;8BAC9B,cAAA,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAI,WAAU;sCAAmC,QAAQ,IAAI;;;;;;;;;;;mBAFxD,QAAQ,EAAE;;;;;YAMxB;YAEA,qBACE,6LAAC;gBAEC,WAAW,CAAC,KAAK,EACf,QAAQ,MAAM,KAAK,SAAS,gBAAgB,iBAC5C;0BAEF,cAAA,6LAAC;oBACC,WAAW,CAAC,iCAAiC,EAC3C,QAAQ,MAAM,KAAK,SACf,8DACA,2DACJ;;sCAEF,6LAAC;4BAAI,WAAU;sCACZ,QAAQ,IAAI;;;;;;sCAEf,6LAAC;4BACC,WAAW,CAAC,aAAa,EACvB,QAAQ,MAAM,KAAK,SAAS,oBAAoB,iBAChD;sCAED,QAAQ,SAAS,CAAC,kBAAkB,CAAC,SAAS;gCAC7C,MAAM;gCACN,QAAQ;4BACV;;;;;;;;;;;;eAvBC,QAAQ,EAAE;;;;;QA4BrB;;;;;;AAIR;KAlFwB"}},
    {"offset": {"line": 745, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/PC%20user/OneDrive/Desktop/%E7%A7%BB%E8%A1%8C%E7%94%A8%E3%81%BE%E3%81%A8%E3%82%81%E3%83%95%E3%82%A9%E3%83%AB%E3%83%80%E3%83%BC/udemy-langchain/camper-repair-clean/frontend/components/Chat/TabNavigation.tsx"],"sourcesContent":["'use client';\r\n\r\ntype TabMode = 'chat' | 'diagnostic' | 'repair_advice';\r\n\r\ninterface TabNavigationProps {\r\n  activeTab: TabMode;\r\n  onTabChange: (tab: TabMode) => void;\r\n}\r\n\r\nexport default function TabNavigation({ activeTab, onTabChange }: TabNavigationProps) {\r\n  const tabs = [\r\n    { id: 'chat' as TabMode, label: 'ğŸ¤– çµ±åˆãƒãƒ£ãƒƒãƒˆ', icon: 'ğŸ¤–' },\r\n    { id: 'diagnostic' as TabMode, label: 'ğŸ” ç—‡çŠ¶è¨ºæ–­', icon: 'ğŸ”' },\r\n    { id: 'repair_advice' as TabMode, label: 'ğŸ”§ ä¿®ç†ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚»ãƒ³ã‚¿ãƒ¼', icon: 'ğŸ”§' },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"flex justify-center gap-2 mb-6 flex-wrap\">\r\n      {tabs.map((tab) => (\r\n        <button\r\n          key={tab.id}\r\n          onClick={() => onTabChange(tab.id)}\r\n          className={`px-6 py-3 rounded-full font-semibold transition-all duration-300 ${\r\n            activeTab === tab.id\r\n              ? 'bg-gradient-to-r from-purple-600 to-purple-700 text-white shadow-lg transform scale-105'\r\n              : 'bg-white/90 text-gray-700 hover:bg-white hover:shadow-md border-2 border-transparent hover:border-purple-300'\r\n          }`}\r\n        >\r\n          {tab.label}\r\n        </button>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"names":[],"mappings":";;;;;AAAA;;AASe,SAAS,cAAc,EAAE,SAAS,EAAE,WAAW,EAAsB;IAClF,MAAM,OAAO;QACX;YAAE,IAAI;YAAmB,OAAO;YAAa,MAAM;QAAK;QACxD;YAAE,IAAI;YAAyB,OAAO;YAAW,MAAM;QAAK;QAC5D;YAAE,IAAI;YAA4B,OAAO;YAAkB,MAAM;QAAK;KACvE;IAED,qBACE,6LAAC;QAAI,WAAU;kBACZ,KAAK,GAAG,CAAC,CAAC,oBACT,6LAAC;gBAEC,SAAS,IAAM,YAAY,IAAI,EAAE;gBACjC,WAAW,CAAC,iEAAiE,EAC3E,cAAc,IAAI,EAAE,GAChB,4FACA,gHACJ;0BAED,IAAI,KAAK;eARL,IAAI,EAAE;;;;;;;;;;AAarB;KAxBwB"}},
    {"offset": {"line": 797, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/PC%20user/OneDrive/Desktop/%E7%A7%BB%E8%A1%8C%E7%94%A8%E3%81%BE%E3%81%A8%E3%82%81%E3%83%95%E3%82%A9%E3%83%AB%E3%83%80%E3%83%BC/udemy-langchain/camper-repair-clean/frontend/components/Chat/QuickActions.tsx"],"sourcesContent":["'use client';\r\n\r\ninterface QuickActionsProps {\r\n  onQuickMessage: (message: string) => void;\r\n}\r\n\r\nconst quickActions = [\r\n  { label: 'ãƒãƒƒãƒ†ãƒªãƒ¼ä¸ŠãŒã‚Š', message: 'ãƒãƒƒãƒ†ãƒªãƒ¼ãŒä¸ŠãŒã‚Šã¾ã›ã‚“' },\r\n  { label: 'ãƒˆã‚¤ãƒ¬è©°ã¾ã‚Š', message: 'ãƒˆã‚¤ãƒ¬ãŒè©°ã¾ã‚Šã¾ã—ãŸ' },\r\n  { label: 'ã‚¨ã‚¢ã‚³ãƒ³æ•…éšœ', message: 'ã‚¨ã‚¢ã‚³ãƒ³ãŒåŠ¹ãã¾ã›ã‚“' },\r\n  { label: 'é›¨æ¼ã‚Š', message: 'é›¨æ¼ã‚ŠãŒã—ã¾ã™' },\r\n  { label: 'è²»ç”¨ç›¸è«‡', message: 'ä¿®ç†è²»ç”¨ã‚’çŸ¥ã‚ŠãŸã„' },\r\n];\r\n\r\nexport default function QuickActions({ onQuickMessage }: QuickActionsProps) {\r\n  return (\r\n    <div className=\"flex flex-wrap gap-3 mb-6 justify-center\">\r\n      {quickActions.map((action) => (\r\n        <button\r\n          key={action.label}\r\n          onClick={() => onQuickMessage(action.message)}\r\n          className=\"px-5 py-2.5 bg-white rounded-lg text-gray-700 font-medium hover:bg-purple-50 hover:text-purple-700 transition-all duration-200 shadow-sm hover:shadow-md border-2 border-gray-200 hover:border-purple-300\"\r\n        >\r\n          {action.label}\r\n        </button>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"names":[],"mappings":";;;;;AAAA;;AAMA,MAAM,eAAe;IACnB;QAAE,OAAO;QAAY,SAAS;IAAe;IAC7C;QAAE,OAAO;QAAU,SAAS;IAAa;IACzC;QAAE,OAAO;QAAU,SAAS;IAAa;IACzC;QAAE,OAAO;QAAO,SAAS;IAAU;IACnC;QAAE,OAAO;QAAQ,SAAS;IAAY;CACvC;AAEc,SAAS,aAAa,EAAE,cAAc,EAAqB;IACxE,qBACE,6LAAC;QAAI,WAAU;kBACZ,aAAa,GAAG,CAAC,CAAC,uBACjB,6LAAC;gBAEC,SAAS,IAAM,eAAe,OAAO,OAAO;gBAC5C,WAAU;0BAET,OAAO,KAAK;eAJR,OAAO,KAAK;;;;;;;;;;AAS3B;KAdwB"}},
    {"offset": {"line": 854, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/PC%20user/OneDrive/Desktop/%E7%A7%BB%E8%A1%8C%E7%94%A8%E3%81%BE%E3%81%A8%E3%82%81%E3%83%95%E3%82%A9%E3%83%AB%E3%83%80%E3%83%BC/udemy-langchain/camper-repair-clean/frontend/components/Chat/ChatWindow.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useRef } from 'react';\nimport { Message } from '@/types';\nimport { chatApi, ChatResponse } from '@/lib/api';\nimport MessageList from './MessageList';\nimport MessageInput from './MessageInput';\nimport TabNavigation from './TabNavigation';\nimport QuickActions from './QuickActions';\nimport RelatedBlogs from './RelatedBlogs';\n\ntype TabMode = 'chat' | 'diagnostic' | 'repair_advice';\n\nexport default function ChatWindow() {\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [activeTab, setActiveTab] = useState<TabMode>('chat');\n  const [sessionId] = useState<string>(() => {\n    // ã‚»ãƒƒã‚·ãƒ§ãƒ³IDã‚’ç”Ÿæˆï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰å–å¾—ã¾ãŸã¯æ–°è¦ä½œæˆï¼‰\n    if (typeof window !== 'undefined') {\n      const stored = localStorage.getItem('chat_session_id');\n      if (stored) return stored;\n      const newId = `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n      localStorage.setItem('chat_session_id', newId);\n      return newId;\n    }\n    return `session_${Date.now()}`;\n  });\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒªã‚¹ãƒˆã®æœ€å¾Œã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  // ä¼šè©±é–‹å§‹\n  useEffect(() => {\n    const startConversation = async () => {\n      try {\n        await chatApi.startConversation(sessionId);\n        // åˆæœŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿½åŠ \n        const welcomeMessage: Message = {\n          id: `msg_${Date.now()}_welcome`,\n          text: 'ğŸ”§ ã‚­ãƒ£ãƒ³ãƒ”ãƒ³ã‚°ã‚«ãƒ¼ä¿®ç†ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆã«ã‚ˆã†ã“ãï¼\\nä¿®ç†ã«ã¤ã„ã¦ä½•ã§ã‚‚ãŠèããã ã•ã„ã€‚AIè¨ºæ–­ã€è©³ç´°æ¤œç´¢ã€è²»ç”¨ç›¸è«‡ãªã©ã€ã‚ã‚‰ã‚†ã‚‹æ©Ÿèƒ½ã‚’çµ±åˆã—ã¦ã„ã¾ã™ã€‚',\n          sender: 'system',\n          timestamp: new Date(),\n        };\n        setMessages([welcomeMessage]);\n      } catch (error) {\n        console.error('ä¼šè©±é–‹å§‹ã‚¨ãƒ©ãƒ¼:', error);\n      }\n    };\n    startConversation();\n  }, [sessionId]);\n\n  // ã‚¿ãƒ–å¤‰æ›´æ™‚ã®å‡¦ç†\n  const handleTabChange = (tab: TabMode) => {\n    setActiveTab(tab);\n    if (tab === 'repair_advice') {\n      // ä¿®ç†ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚»ãƒ³ã‚¿ãƒ¼ã®å ´åˆã¯åˆ¥ãƒšãƒ¼ã‚¸ã«é·ç§»\n      if (typeof window !== 'undefined') {\n        window.location.href = '/repair-advice';\n      }\n    }\n  };\n\n  // ã‚¯ã‚¤ãƒƒã‚¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡\n  const handleQuickMessage = (message: string) => {\n    handleSend(message);\n  };\n\n  const handleSend = async (text: string) => {\n    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿½åŠ \n    const userMessage: Message = {\n      id: `msg_${Date.now()}_user`,\n      text,\n      sender: 'user',\n      timestamp: new Date(),\n    };\n    setMessages((prev) => [...prev, userMessage]);\n    setIsLoading(true);\n\n    // ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®šï¼ˆ60ç§’ï¼‰\n    const timeoutId = setTimeout(() => {\n      setIsLoading(false);\n      const timeoutMessage: Message = {\n        id: `msg_${Date.now()}_timeout`,\n        text: 'â±ï¸ å¿œç­”ã«æ™‚é–“ãŒã‹ã‹ã£ã¦ã„ã¾ã™ã€‚ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„ã€‚',\n        sender: 'ai',\n        timestamp: new Date(),\n      };\n      setMessages((prev) => [...prev, timeoutMessage]);\n    }, 60000);\n\n    try {\n      // APIã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡\n      const startTime = Date.now();\n      const response: ChatResponse = await chatApi.sendMessage(text, sessionId);\n      const elapsedTime = Date.now() - startTime;\n\n      clearTimeout(timeoutId);\n\n      // AIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿½åŠ \n      const aiMessage: Message = {\n        id: `msg_${Date.now()}_ai`,\n        text: response.answer || response.response || 'ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€‚å¿œç­”ã‚’ç”Ÿæˆã§ãã¾ã›ã‚“ã§ã—ãŸã€‚',\n        sender: 'ai',\n        timestamp: new Date(),\n      };\n      setMessages((prev) => [...prev, aiMessage]);\n\n      // ãƒ‡ãƒãƒƒã‚°æƒ…å ±ï¼ˆé–‹ç™ºç’°å¢ƒã®ã¿ï¼‰\n      if (process.env.NODE_ENV === 'development') {\n        console.log(`å¿œç­”æ™‚é–“: ${(elapsedTime / 1000).toFixed(2)}ç§’`);\n      }\n    } catch (error) {\n      clearTimeout(timeoutId);\n      console.error('ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ã‚¨ãƒ©ãƒ¼:', error);\n      \n      let errorText = 'âŒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚';\n      if (error instanceof Error) {\n        if (error.message.includes('timeout') || error.message.includes('Network Error')) {\n          errorText = 'â±ï¸ ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚';\n        } else {\n          errorText = `âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}`;\n        }\n      }\n      \n      const errorMessage: Message = {\n        id: `msg_${Date.now()}_error`,\n        text: errorText,\n        sender: 'ai',\n        timestamp: new Date(),\n      };\n      setMessages((prev) => [...prev, errorMessage]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col h-full\">\n      {/* ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */}\n      <TabNavigation activeTab={activeTab} onTabChange={handleTabChange} />\n\n      {/* ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆçµ±åˆãƒãƒ£ãƒƒãƒˆã¨ç—‡çŠ¶è¨ºæ–­ã®æ™‚ã®ã¿è¡¨ç¤ºï¼‰ */}\n      {(activeTab === 'chat' || activeTab === 'diagnostic') && (\n        <QuickActions onQuickMessage={handleQuickMessage} />\n      )}\n\n      {/* ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¨ãƒªã‚¢ */}\n      <div className=\"flex-1 flex flex-col overflow-hidden min-h-0\">\n        {activeTab === 'chat' && (\n          <>\n            <MessageList \n              messages={messages} \n              onSend={messages.length === 0 ? handleSend : undefined}\n              disabled={isLoading}\n            />\n            <div ref={messagesEndRef} className=\"h-0\" />\n            {/* é–¢é€£ãƒ–ãƒ­ã‚°ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆä¸€æ™‚çš„ã«éè¡¨ç¤ºï¼‰ */}\n            {/* {messages.length <= 1 && <RelatedBlogs />} */}\n            {/* ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã‚ã‚‹æ™‚ã¯ä¸‹éƒ¨ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å…¥åŠ›æ¬„ã‚’è¡¨ç¤º */}\n            {messages.length > 0 && (\n              <div className=\"mt-2 flex-shrink-0\">\n                <MessageInput onSend={handleSend} disabled={isLoading} />\n              </div>\n            )}\n          </>\n        )}\n        {activeTab === 'diagnostic' && (\n          <div className=\"text-center py-8 text-gray-600\">\n            <p className=\"text-lg mb-4\">ğŸ” ç—‡çŠ¶è¨ºæ–­æ©Ÿèƒ½</p>\n            <p>ç—‡çŠ¶ã‚’è©³ã—ãæ•™ãˆã¦ãã ã•ã„ã€‚AIãŒåŸå› ã‚’ç‰¹å®šã—ã¾ã™ã€‚</p>\n            <MessageList \n              messages={messages} \n              onSend={messages.length === 0 ? handleSend : undefined}\n              disabled={isLoading}\n            />\n            <div ref={messagesEndRef} />\n            {/* ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã‚ã‚‹æ™‚ã¯ä¸‹éƒ¨ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å…¥åŠ›æ¬„ã‚’è¡¨ç¤º */}\n            {messages.length > 0 && (\n              <div className=\"mt-4\">\n                <MessageInput onSend={handleSend} disabled={isLoading} />\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º */}\n      {isLoading && (\n        <div className=\"flex items-center justify-center gap-2 mt-3 p-3 bg-blue-50 rounded-lg border border-blue-200\">\n          <div className=\"flex gap-1\">\n            <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\" style={{ animationDelay: '0ms' }}></div>\n            <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\" style={{ animationDelay: '150ms' }}></div>\n            <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\" style={{ animationDelay: '300ms' }}></div>\n          </div>\n          <span className=\"text-blue-600 font-medium\">AIãŒè€ƒãˆã¦ã„ã¾ã™...</span>\n          <span className=\"text-blue-400 text-sm\">ï¼ˆé€šå¸¸10-30ç§’ã‹ã‹ã‚Šã¾ã™ï¼‰</span>\n        </div>\n      )}\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;AAoHU;;AAlHV;AAEA;AACA;AACA;AACA;AACA;;;AARA;;;;;;;AAae,SAAS;;IACtB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAY,EAAE;IACtD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAU;IACpD,MAAM,CAAC,UAAU,GAAG,IAAA,yKAAQ;+BAAS;YACnC,wCAAwC;YACxC,wCAAmC;gBACjC,MAAM,SAAS,aAAa,OAAO,CAAC;gBACpC,IAAI,QAAQ,OAAO;gBACnB,MAAM,QAAQ,CAAC,QAAQ,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,MAAM,CAAC,GAAG,IAAI;gBAChF,aAAa,OAAO,CAAC,mBAAmB;gBACxC,OAAO;YACT;;;QAEF;;IACA,MAAM,iBAAiB,IAAA,uKAAM,EAAiB;IAE9C,oBAAoB;IACpB,MAAM,iBAAiB;QACrB,eAAe,OAAO,EAAE,eAAe;YAAE,UAAU;QAAS;IAC9D;IAEA,IAAA,0KAAS;gCAAC;YACR;QACF;+BAAG;QAAC;KAAS;IAEb,OAAO;IACP,IAAA,0KAAS;gCAAC;YACR,MAAM;0DAAoB;oBACxB,IAAI;wBACF,MAAM,wHAAO,CAAC,iBAAiB,CAAC;wBAChC,aAAa;wBACb,MAAM,iBAA0B;4BAC9B,IAAI,CAAC,IAAI,EAAE,KAAK,GAAG,GAAG,QAAQ,CAAC;4BAC/B,MAAM;4BACN,QAAQ;4BACR,WAAW,IAAI;wBACjB;wBACA,YAAY;4BAAC;yBAAe;oBAC9B,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC,YAAY;oBAC5B;gBACF;;YACA;QACF;+BAAG;QAAC;KAAU;IAEd,WAAW;IACX,MAAM,kBAAkB,CAAC;QACvB,aAAa;QACb,IAAI,QAAQ,iBAAiB;YAC3B,yBAAyB;YACzB,wCAAmC;gBACjC,OAAO,QAAQ,CAAC,IAAI,GAAG;YACzB;QACF;IACF;IAEA,cAAc;IACd,MAAM,qBAAqB,CAAC;QAC1B,WAAW;IACb;IAEA,MAAM,aAAa,OAAO;QACxB,eAAe;QACf,MAAM,cAAuB;YAC3B,IAAI,CAAC,IAAI,EAAE,KAAK,GAAG,GAAG,KAAK,CAAC;YAC5B;YACA,QAAQ;YACR,WAAW,IAAI;QACjB;QACA,YAAY,CAAC,OAAS;mBAAI;gBAAM;aAAY;QAC5C,aAAa;QAEb,gBAAgB;QAChB,MAAM,YAAY,WAAW;YAC3B,aAAa;YACb,MAAM,iBAA0B;gBAC9B,IAAI,CAAC,IAAI,EAAE,KAAK,GAAG,GAAG,QAAQ,CAAC;gBAC/B,MAAM;gBACN,QAAQ;gBACR,WAAW,IAAI;YACjB;YACA,YAAY,CAAC,OAAS;uBAAI;oBAAM;iBAAe;QACjD,GAAG;QAEH,IAAI;YACF,eAAe;YACf,MAAM,YAAY,KAAK,GAAG;YAC1B,MAAM,WAAyB,MAAM,wHAAO,CAAC,WAAW,CAAC,MAAM;YAC/D,MAAM,cAAc,KAAK,GAAG,KAAK;YAEjC,aAAa;YAEb,aAAa;YACb,MAAM,YAAqB;gBACzB,IAAI,CAAC,IAAI,EAAE,KAAK,GAAG,GAAG,GAAG,CAAC;gBAC1B,MAAM,SAAS,MAAM,IAAI,SAAS,QAAQ,IAAI;gBAC9C,QAAQ;gBACR,WAAW,IAAI;YACjB;YACA,YAAY,CAAC,OAAS;uBAAI;oBAAM;iBAAU;YAE1C,iBAAiB;YACjB,wCAA4C;gBAC1C,QAAQ,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,cAAc,IAAI,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC;YACzD;QACF,EAAE,OAAO,OAAO;YACd,aAAa;YACb,QAAQ,KAAK,CAAC,eAAe;YAE7B,IAAI,YAAY;YAChB,IAAI,iBAAiB,OAAO;gBAC1B,IAAI,MAAM,OAAO,CAAC,QAAQ,CAAC,cAAc,MAAM,OAAO,CAAC,QAAQ,CAAC,kBAAkB;oBAChF,YAAY;gBACd,OAAO;oBACL,YAAY,CAAC,OAAO,EAAE,MAAM,OAAO,EAAE;gBACvC;YACF;YAEA,MAAM,eAAwB;gBAC5B,IAAI,CAAC,IAAI,EAAE,KAAK,GAAG,GAAG,MAAM,CAAC;gBAC7B,MAAM;gBACN,QAAQ;gBACR,WAAW,IAAI;YACjB;YACA,YAAY,CAAC,OAAS;uBAAI;oBAAM;iBAAa;QAC/C,SAAU;YACR,aAAa;QACf;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC,kJAAa;gBAAC,WAAW;gBAAW,aAAa;;;;;;YAGjD,CAAC,cAAc,UAAU,cAAc,YAAY,mBAClD,6LAAC,iJAAY;gBAAC,gBAAgB;;;;;;0BAIhC,6LAAC;gBAAI,WAAU;;oBACZ,cAAc,wBACb;;0CACE,6LAAC,gJAAW;gCACV,UAAU;gCACV,QAAQ,SAAS,MAAM,KAAK,IAAI,aAAa;gCAC7C,UAAU;;;;;;0CAEZ,6LAAC;gCAAI,KAAK;gCAAgB,WAAU;;;;;;4BAInC,SAAS,MAAM,GAAG,mBACjB,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC,iJAAY;oCAAC,QAAQ;oCAAY,UAAU;;;;;;;;;;;;;oBAKnD,cAAc,8BACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAE,WAAU;0CAAe;;;;;;0CAC5B,6LAAC;0CAAE;;;;;;0CACH,6LAAC,gJAAW;gCACV,UAAU;gCACV,QAAQ,SAAS,MAAM,KAAK,IAAI,aAAa;gCAC7C,UAAU;;;;;;0CAEZ,6LAAC;gCAAI,KAAK;;;;;;4BAET,SAAS,MAAM,GAAG,mBACjB,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC,iJAAY;oCAAC,QAAQ;oCAAY,UAAU;;;;;;;;;;;;;;;;;;;;;;;YAQrD,2BACC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;gCAAkD,OAAO;oCAAE,gBAAgB;gCAAM;;;;;;0CAChG,6LAAC;gCAAI,WAAU;gCAAkD,OAAO;oCAAE,gBAAgB;gCAAQ;;;;;;0CAClG,6LAAC;gCAAI,WAAU;gCAAkD,OAAO;oCAAE,gBAAgB;gCAAQ;;;;;;;;;;;;kCAEpG,6LAAC;wBAAK,WAAU;kCAA4B;;;;;;kCAC5C,6LAAC;wBAAK,WAAU;kCAAwB;;;;;;;;;;;;;;;;;;AAKlD;GAnMwB;KAAA"}},
    {"offset": {"line": 1222, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/PC%20user/OneDrive/Desktop/%E7%A7%BB%E8%A1%8C%E7%94%A8%E3%81%BE%E3%81%A8%E3%82%81%E3%83%95%E3%82%A9%E3%83%AB%E3%83%80%E3%83%BC/udemy-langchain/camper-repair-clean/frontend/components/Navigation.tsx"],"sourcesContent":["'use client';\n\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\n\nexport default function Navigation() {\n  const pathname = usePathname();\n\n  // ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ãƒšãƒ¼ã‚¸ã§ã¯ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚’éè¡¨ç¤º\n  const publicPages = ['/', '/chat', '/partner', '/lp-camper-repair', '/lp-partner-recruit', '/repair-advice'];\n  const isPublicPage = publicPages.includes(pathname || '');\n\n  // ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ãƒšãƒ¼ã‚¸ã§ã¯ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¤ºã—ãªã„\n  if (isPublicPage) {\n    return null;\n  }\n\n  // ç®¡ç†è€…/å·¥å ´å‘ã‘ãƒšãƒ¼ã‚¸ã§ã®ã¿ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¤º\n  const navLinks = [\n    { href: '/', label: 'ğŸ  ãƒ›ãƒ¼ãƒ ', icon: 'ğŸ ' },\n    { href: '/chat', label: 'ğŸ’¬ ãƒãƒ£ãƒƒãƒˆ', icon: 'ğŸ’¬' },\n    { href: '/partner', label: 'ğŸ”§ ä¿®ç†åº—ç´¹ä»‹', icon: 'ğŸ”§' },\n    { href: '/factory', label: 'ğŸ­ å·¥å ´ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰', icon: 'ğŸ­' },\n    { href: '/admin', label: 'âš™ï¸ ç®¡ç†è€…ç”»é¢', icon: 'âš™ï¸' },\n  ];\n\n  return (\n    <nav className=\"bg-white/95 backdrop-blur-sm rounded-lg shadow-md p-4 mb-6\">\n      <div className=\"flex flex-wrap gap-2 justify-center items-center\">\n        {navLinks.map((link) => {\n          const isActive = pathname === link.href;\n          return (\n            <Link\n              key={link.href}\n              href={link.href}\n              className={`px-4 py-2 rounded-lg font-semibold transition-all ${\n                isActive\n                  ? 'bg-purple-600 text-white shadow-lg'\n                  : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n              }`}\n            >\n              {link.label}\n            </Link>\n          );\n        })}\n      </div>\n    </nav>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAKe,SAAS;;IACtB,MAAM,WAAW,IAAA,oJAAW;IAE5B,2BAA2B;IAC3B,MAAM,cAAc;QAAC;QAAK;QAAS;QAAY;QAAqB;QAAuB;KAAiB;IAC5G,MAAM,eAAe,YAAY,QAAQ,CAAC,YAAY;IAEtD,6BAA6B;IAC7B,IAAI,cAAc;QAChB,OAAO;IACT;IAEA,2BAA2B;IAC3B,MAAM,WAAW;QACf;YAAE,MAAM;YAAK,OAAO;YAAU,MAAM;QAAK;QACzC;YAAE,MAAM;YAAS,OAAO;YAAW,MAAM;QAAK;QAC9C;YAAE,MAAM;YAAY,OAAO;YAAY,MAAM;QAAK;QAClD;YAAE,MAAM;YAAY,OAAO;YAAgB,MAAM;QAAK;QACtD;YAAE,MAAM;YAAU,OAAO;YAAY,MAAM;QAAK;KACjD;IAED,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;sBACZ,SAAS,GAAG,CAAC,CAAC;gBACb,MAAM,WAAW,aAAa,KAAK,IAAI;gBACvC,qBACE,6LAAC,0KAAI;oBAEH,MAAM,KAAK,IAAI;oBACf,WAAW,CAAC,kDAAkD,EAC5D,WACI,uCACA,+CACJ;8BAED,KAAK,KAAK;mBARN,KAAK,IAAI;;;;;YAWpB;;;;;;;;;;;AAIR;GA3CwB;;QACL,oJAAW;;;KADN"}},
    {"offset": {"line": 1321, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/PC%20user/OneDrive/Desktop/%E7%A7%BB%E8%A1%8C%E7%94%A8%E3%81%BE%E3%81%A8%E3%82%81%E3%83%95%E3%82%A9%E3%83%AB%E3%83%80%E3%83%BC/udemy-langchain/camper-repair-clean/frontend/app/chat/page.tsx"],"sourcesContent":["'use client';\n\nimport Link from 'next/link';\nimport ChatWindow from '@/components/Chat/ChatWindow';\nimport Navigation from '@/components/Navigation';\n\nexport default function ChatPage() {\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-500 via-purple-600 to-purple-700 p-3\">\n      <div className=\"max-w-6xl mx-auto\">\n        {/* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */}\n        <Navigation />\n\n        {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}\n        <div className=\"bg-white/95 backdrop-blur-sm rounded-2xl p-5 mb-4 shadow-xl text-center\">\n          <h1 className=\"text-2xl font-bold text-purple-600 mb-2\">\n            ğŸ”§ ã‚­ãƒ£ãƒ³ãƒ”ãƒ³ã‚°ã‚«ãƒ¼ä¿®ç†ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆ\n          </h1>\n          <p className=\"text-gray-600 text-base mb-3\">\n            AIè¨ºæ–­ + ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æƒ…å ± + å°‚é–€çŸ¥è­˜ = ä¿®ç†æ”¯æ´\n          </p>\n          <div className=\"flex justify-center gap-3 flex-wrap\">\n            <Link\n              href=\"/partner\"\n              className=\"inline-block px-5 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm font-semibold\"\n            >\n              ğŸ”§ ä¿®ç†åº—ã‚’æ¢ã™\n            </Link>\n            <Link\n              href=\"/lp-partner-recruit\"\n              className=\"inline-block px-5 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm font-semibold\"\n            >\n              ğŸ­ ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼å‹Ÿé›†\n            </Link>\n          </div>\n        </div>\n\n        {/* ãƒãƒ£ãƒƒãƒˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ */}\n        <div className=\"bg-white/95 backdrop-blur-sm rounded-2xl p-4 shadow-xl flex flex-col\" style={{ height: 'calc(100vh - 240px)', minHeight: '450px' }}>\n          <ChatWindow />\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACtB,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BAEb,6LAAC,uIAAU;;;;;8BAGX,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAG,WAAU;sCAA0C;;;;;;sCAGxD,6LAAC;4BAAE,WAAU;sCAA+B;;;;;;sCAG5C,6LAAC;4BAAI,WAAU;;8CACb,6LAAC,0KAAI;oCACH,MAAK;oCACL,WAAU;8CACX;;;;;;8CAGD,6LAAC,0KAAI;oCACH,MAAK;oCACL,WAAU;8CACX;;;;;;;;;;;;;;;;;;8BAOL,6LAAC;oBAAI,WAAU;oBAAuE,OAAO;wBAAE,QAAQ;wBAAuB,WAAW;oBAAQ;8BAC/I,cAAA,6LAAC,+IAAU;;;;;;;;;;;;;;;;;;;;;AAKrB;KAtCwB"}}]
}