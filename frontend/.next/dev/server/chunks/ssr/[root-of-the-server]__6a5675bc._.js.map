{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/udemy-langchain/camper-repair-clean/frontend/lib/api.ts"],"sourcesContent":["/**\r\n * API„ÇØ„É©„Ç§„Ç¢„É≥„Éà\r\n * Êó¢Â≠ò„ÅÆFlask„Éê„ÉÉ„ÇØ„Ç®„É≥„ÉâAPI„Å®ÈÄö‰ø°„Åô„Çã„Åü„ÇÅ„ÅÆÈñ¢Êï∞Áæ§\r\n */\r\n\r\nimport axios from 'axios';\r\n\r\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5002';\r\n\r\nconst apiClient = axios.create({\r\n  baseURL: API_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n  timeout: 60000, // 60Áßí„ÅÆ„Çø„Ç§„É†„Ç¢„Ç¶„Éà\r\n});\r\n\r\n// „ÉÅ„É£„ÉÉ„ÉàAPI\r\nexport interface ChatMessage {\r\n  message: string;\r\n  session_id?: string;\r\n}\r\n\r\nexport interface ChatResponse {\r\n  answer?: string;\r\n  response?: string;\r\n  type?: string;\r\n  error?: string;\r\n}\r\n\r\nexport const chatApi = {\r\n  /**\r\n   * „ÉÅ„É£„ÉÉ„Éà„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÈÄÅ‰ø°\r\n   */\r\n  sendMessage: async (message: string, sessionId?: string): Promise<ChatResponse> => {\r\n    const response = await apiClient.post<ChatResponse>('/api/unified/chat', {\r\n      message,\r\n      session_id: sessionId,\r\n    });\r\n    return response.data;\r\n  },\r\n\r\n  /**\r\n   * ‰ºöË©±„ÇíÈñãÂßã\r\n   */\r\n  startConversation: async (sessionId?: string): Promise<ChatResponse> => {\r\n    const response = await apiClient.post<ChatResponse>('/start_conversation', {\r\n      session_id: sessionId,\r\n    });\r\n    return response.data;\r\n  },\r\n};\r\n\r\n// Â∑•Â†¥„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„ÉâAPI\r\nexport interface FactoryCase {\r\n  id: string;\r\n  title: string;\r\n  status: string;\r\n  created_at: string;\r\n  [key: string]: any;\r\n}\r\n\r\nexport const factoryApi = {\r\n  /**\r\n   * Ê°à‰ª∂‰∏ÄË¶ß„ÇíÂèñÂæó\r\n   */\r\n  getCases: async (status?: string): Promise<FactoryCase[]> => {\r\n    try {\r\n      const params = status ? { status } : {};\r\n      const response = await apiClient.get<{ success: boolean; cases: FactoryCase[] }>('/admin/api/cases', { params });\r\n      \r\n      if (response.data.success && response.data.cases) {\r\n        return response.data.cases;\r\n      }\r\n      \r\n      // ‰∫íÊèõÊÄß„ÅÆ„Åü„ÇÅ„ÄÅcases„ÅåÁõ¥Êé•ÈÖçÂàó„ÅÆÂ†¥Âêà„ÇÇÂØæÂøú\r\n      if (Array.isArray(response.data)) {\r\n        return response.data;\r\n      }\r\n      \r\n      return [];\r\n    } catch (error: any) {\r\n      console.error('Ê°à‰ª∂ÂèñÂæóAPI„Ç®„É©„Éº:', error);\r\n      if (error.response) {\r\n        console.error('„É¨„Çπ„Éù„É≥„Çπ:', error.response.data);\r\n        console.error('„Çπ„ÉÜ„Éº„Çø„Çπ:', error.response.status);\r\n      }\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Ê°à‰ª∂„ÅÆ„Çπ„ÉÜ„Éº„Çø„Çπ„ÇíÊõ¥Êñ∞\r\n   */\r\n  updateCaseStatus: async (pageId: string, status: string): Promise<void> => {\r\n    await apiClient.post('/admin/api/update-status', {\r\n      page_id: pageId,\r\n      status,\r\n    });\r\n  },\r\n\r\n  /**\r\n   * „Ç≥„É°„É≥„Éà„ÇíËøΩÂä†\r\n   */\r\n  addComment: async (pageId: string, comment: string): Promise<void> => {\r\n    await apiClient.post('/admin/api/add-comment', {\r\n      page_id: pageId,\r\n      comment,\r\n    });\r\n  },\r\n};\r\n\r\n// ÁÆ°ÁêÜËÄÖAPI\r\nexport interface FileInfo {\r\n  name: string;\r\n  size: string;\r\n}\r\n\r\nexport interface SystemInfo {\r\n  dbStatus: string;\r\n  docCount: number;\r\n}\r\n\r\nexport interface Builder {\r\n  id: string;\r\n  name: string;\r\n  prefecture: string;\r\n  address: string;\r\n  phone: string;\r\n  email: string;\r\n  status: string;\r\n}\r\n\r\nexport const adminApi = {\r\n  /**\r\n   * „Éá„Éº„Çø„Éô„Éº„Çπ„ÇíÂÜçÊßãÁØâ\r\n   */\r\n  reloadDatabase: async (): Promise<{ success: boolean; message?: string; error?: string }> => {\r\n    const response = await apiClient.post('/reload_data');\r\n    return response.data;\r\n  },\r\n\r\n  /**\r\n   * „Éï„Ç°„Ç§„É´‰∏ÄË¶ß„ÇíÂèñÂæó\r\n   */\r\n  getFileList: async (): Promise<FileInfo[]> => {\r\n    try {\r\n      const response = await apiClient.get('/api/admin/files');\r\n      return response.data.files || [];\r\n    } catch (error) {\r\n      console.error('„Éï„Ç°„Ç§„É´‰∏ÄË¶ßÂèñÂæó„Ç®„É©„Éº:', error);\r\n      return [];\r\n    }\r\n  },\r\n\r\n  /**\r\n   * „Ç∑„Çπ„ÉÜ„É†ÊÉÖÂ†±„ÇíÂèñÂæó\r\n   */\r\n  getSystemInfo: async (): Promise<SystemInfo> => {\r\n    try {\r\n      const response = await apiClient.get('/api/admin/system-info');\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('„Ç∑„Çπ„ÉÜ„É†ÊÉÖÂ†±ÂèñÂæó„Ç®„É©„Éº:', error);\r\n      return {\r\n        dbStatus: '„Ç®„É©„Éº',\r\n        docCount: 0,\r\n      };\r\n    }\r\n  },\r\n\r\n  /**\r\n   * „Éì„É´„ÉÄ„Éº‰∏ÄË¶ß„ÇíÂèñÂæó\r\n   */\r\n  getBuilders: async (): Promise<Builder[]> => {\r\n    try {\r\n      const response = await apiClient.get('/api/v1/builders');\r\n      return response.data.builders || [];\r\n    } catch (error) {\r\n      console.error('„Éì„É´„ÉÄ„Éº‰∏ÄË¶ßÂèñÂæó„Ç®„É©„Éº:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Â∑•Â†¥„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØÊÉÖÂ†±„ÇíÂèñÂæó\r\n   */\r\n  getFactoryNetwork: async () => {\r\n    try {\r\n      const response = await apiClient.get('/api/admin/factory-network');\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Â∑•Â†¥„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØÊÉÖÂ†±ÂèñÂæó„Ç®„É©„Éº:', error);\r\n      return { factories: [] };\r\n    }\r\n  },\r\n\r\n  /**\r\n   * „Éà„É©„Éñ„É´ÂÇæÂêëÂàÜÊûê„ÇíÂèñÂæó\r\n   */\r\n  getAnalytics: async () => {\r\n    try {\r\n      const response = await apiClient.get('/api/admin/analytics');\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('„Éà„É©„Éñ„É´ÂÇæÂêëÂàÜÊûêÂèñÂæó„Ç®„É©„Éº:', error);\r\n      return { trends: [] };\r\n    }\r\n  },\r\n};\r\n\r\nexport default apiClient;\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 256, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/udemy-langchain/camper-repair-clean/frontend/components/Chat/MessageList.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { Message } from '@/types';\r\n\r\ninterface MessageListProps {\r\n  messages: Message[];\r\n}\r\n\r\nexport default function MessageList({ messages }: MessageListProps) {\r\n  return (\r\n    <div className=\"flex flex-col gap-4 p-4 bg-gray-50 rounded-lg border-2 border-gray-200 max-h-[400px] overflow-y-auto\">\r\n      {messages.length === 0 ? (\r\n        <div className=\"text-center text-gray-500 py-8\">\r\n          <p className=\"text-lg\">üÜï Êñ∞„Åó„ÅÑ‰ºöË©±„ÇíÈñãÂßã„Åó„Åæ„Åó„Åü„ÄÇ‰Ωï„Åß„ÇÇ„ÅäËÅû„Åç„Åè„Å†„Åï„ÅÑÔºÅ</p>\r\n        </div>\r\n      ) : (\r\n        messages.map((message) => (\r\n          <div\r\n            key={message.id}\r\n            className={`flex ${\r\n              message.sender === 'user' ? 'justify-end' : 'justify-start'\r\n            }`}\r\n          >\r\n            <div\r\n              className={`max-w-[80%] rounded-lg px-4 py-2 ${\r\n                message.sender === 'user'\r\n                  ? 'bg-blue-500 text-white'\r\n                  : 'bg-white text-gray-800 border border-gray-200'\r\n              }`}\r\n            >\r\n              <div className=\"whitespace-pre-wrap break-words\">\r\n                {message.text}\r\n              </div>\r\n              <div\r\n                className={`text-xs mt-1 ${\r\n                  message.sender === 'user' ? 'text-blue-100' : 'text-gray-500'\r\n                }`}\r\n              >\r\n                {message.timestamp.toLocaleTimeString('ja-JP', {\r\n                  hour: '2-digit',\r\n                  minute: '2-digit',\r\n                })}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAAA;;AAQe,SAAS,YAAY,EAAE,QAAQ,EAAoB;IAChE,qBACE,wTAAC;QAAI,WAAU;kBACZ,SAAS,MAAM,KAAK,kBACnB,wTAAC;YAAI,WAAU;sBACb,cAAA,wTAAC;gBAAE,WAAU;0BAAU;;;;;;;;;;mBAGzB,SAAS,GAAG,CAAC,CAAC,wBACZ,wTAAC;gBAEC,WAAW,CAAC,KAAK,EACf,QAAQ,MAAM,KAAK,SAAS,gBAAgB,iBAC5C;0BAEF,cAAA,wTAAC;oBACC,WAAW,CAAC,iCAAiC,EAC3C,QAAQ,MAAM,KAAK,SACf,2BACA,iDACJ;;sCAEF,wTAAC;4BAAI,WAAU;sCACZ,QAAQ,IAAI;;;;;;sCAEf,wTAAC;4BACC,WAAW,CAAC,aAAa,EACvB,QAAQ,MAAM,KAAK,SAAS,kBAAkB,iBAC9C;sCAED,QAAQ,SAAS,CAAC,kBAAkB,CAAC,SAAS;gCAC7C,MAAM;gCACN,QAAQ;4BACV;;;;;;;;;;;;eAvBC,QAAQ,EAAE;;;;;;;;;;AA+B3B"}},
    {"offset": {"line": 325, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/udemy-langchain/camper-repair-clean/frontend/components/Chat/MessageInput.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, KeyboardEvent } from 'react';\r\n\r\ninterface MessageInputProps {\r\n  onSend: (message: string) => void;\r\n  disabled?: boolean;\r\n}\r\n\r\nexport default function MessageInput({ onSend, disabled = false }: MessageInputProps) {\r\n  const [message, setMessage] = useState('');\r\n\r\n  const handleSend = () => {\r\n    if (message.trim() && !disabled) {\r\n      onSend(message.trim());\r\n      setMessage('');\r\n    }\r\n  };\r\n\r\n  const handleKeyPress = (e: KeyboardEvent<HTMLTextAreaElement>) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSend();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex gap-2 items-end\">\r\n      <textarea\r\n        value={message}\r\n        onChange={(e) => setMessage(e.target.value)}\r\n        onKeyPress={handleKeyPress}\r\n        placeholder=\"„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÂÖ•Âäõ...\"\r\n        disabled={disabled}\r\n        className=\"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none disabled:bg-gray-100 disabled:cursor-not-allowed\"\r\n        rows={1}\r\n        style={{ minHeight: '48px', maxHeight: '120px' }}\r\n      />\r\n      <button\r\n        onClick={handleSend}\r\n        disabled={disabled || !message.trim()}\r\n        className=\"px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors\"\r\n      >\r\n        ÈÄÅ‰ø°\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AASe,SAAS,aAAa,EAAE,MAAM,EAAE,WAAW,KAAK,EAAqB;IAClF,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,2RAAQ,EAAC;IAEvC,MAAM,aAAa;QACjB,IAAI,QAAQ,IAAI,MAAM,CAAC,UAAU;YAC/B,OAAO,QAAQ,IAAI;YACnB,WAAW;QACb;IACF;IAEA,MAAM,iBAAiB,CAAC;QACtB,IAAI,EAAE,GAAG,KAAK,WAAW,CAAC,EAAE,QAAQ,EAAE;YACpC,EAAE,cAAc;YAChB;QACF;IACF;IAEA,qBACE,wTAAC;QAAI,WAAU;;0BACb,wTAAC;gBACC,OAAO;gBACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;gBAC1C,YAAY;gBACZ,aAAY;gBACZ,UAAU;gBACV,WAAU;gBACV,MAAM;gBACN,OAAO;oBAAE,WAAW;oBAAQ,WAAW;gBAAQ;;;;;;0BAEjD,wTAAC;gBACC,SAAS;gBACT,UAAU,YAAY,CAAC,QAAQ,IAAI;gBACnC,WAAU;0BACX;;;;;;;;;;;;AAKP"}},
    {"offset": {"line": 389, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/udemy-langchain/camper-repair-clean/frontend/components/Chat/ChatWindow.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport { Message } from '@/types';\r\nimport { chatApi, ChatResponse } from '@/lib/api';\r\nimport MessageList from './MessageList';\r\nimport MessageInput from './MessageInput';\r\n\r\nexport default function ChatWindow() {\r\n  const [messages, setMessages] = useState<Message[]>([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [sessionId] = useState<string>(() => {\r\n    // „Çª„ÉÉ„Ç∑„Éß„É≥ID„ÇíÁîüÊàêÔºà„Éñ„É©„Ç¶„Ç∂„ÅÆ„É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„Åã„ÇâÂèñÂæó„Åæ„Åü„ÅØÊñ∞Ë¶è‰ΩúÊàêÔºâ\r\n    if (typeof window !== 'undefined') {\r\n      const stored = localStorage.getItem('chat_session_id');\r\n      if (stored) return stored;\r\n      const newId = `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\r\n      localStorage.setItem('chat_session_id', newId);\r\n      return newId;\r\n    }\r\n    return `session_${Date.now()}`;\r\n  });\r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n\r\n  // „É°„ÉÉ„Çª„Éº„Ç∏„É™„Çπ„Éà„ÅÆÊúÄÂæå„Å´„Çπ„ÇØ„É≠„Éº„É´\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  // ‰ºöË©±ÈñãÂßã\r\n  useEffect(() => {\r\n    const startConversation = async () => {\r\n      try {\r\n        await chatApi.startConversation(sessionId);\r\n      } catch (error) {\r\n        console.error('‰ºöË©±ÈñãÂßã„Ç®„É©„Éº:', error);\r\n      }\r\n    };\r\n    startConversation();\r\n  }, [sessionId]);\r\n\r\n  const handleSend = async (text: string) => {\r\n    // „É¶„Éº„Ç∂„Éº„É°„ÉÉ„Çª„Éº„Ç∏„ÇíËøΩÂä†\r\n    const userMessage: Message = {\r\n      id: `msg_${Date.now()}_user`,\r\n      text,\r\n      sender: 'user',\r\n      timestamp: new Date(),\r\n    };\r\n    setMessages((prev) => [...prev, userMessage]);\r\n    setIsLoading(true);\r\n\r\n    // „Çø„Ç§„É†„Ç¢„Ç¶„ÉàË®≠ÂÆöÔºà60ÁßíÔºâ\r\n    const timeoutId = setTimeout(() => {\r\n      setIsLoading(false);\r\n      const timeoutMessage: Message = {\r\n        id: `msg_${Date.now()}_timeout`,\r\n        text: '‚è±Ô∏è ÂøúÁ≠î„Å´ÊôÇÈñì„Åå„Åã„Åã„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Åó„Å∞„Çâ„Åè„ÅäÂæÖ„Å°„Åè„Å†„Åï„ÅÑ„ÄÇ',\r\n        sender: 'ai',\r\n        timestamp: new Date(),\r\n      };\r\n      setMessages((prev) => [...prev, timeoutMessage]);\r\n    }, 60000);\r\n\r\n    try {\r\n      // API„Å´„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÈÄÅ‰ø°\r\n      const startTime = Date.now();\r\n      const response: ChatResponse = await chatApi.sendMessage(text, sessionId);\r\n      const elapsedTime = Date.now() - startTime;\r\n\r\n      clearTimeout(timeoutId);\r\n\r\n      // AI„É¨„Çπ„Éù„É≥„Çπ„ÇíËøΩÂä†\r\n      const aiMessage: Message = {\r\n        id: `msg_${Date.now()}_ai`,\r\n        text: response.answer || response.response || 'Áî≥„ÅóË®≥„Åî„Åñ„ÅÑ„Åæ„Åõ„Çì„ÄÇÂøúÁ≠î„ÇíÁîüÊàê„Åß„Åç„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ',\r\n        sender: 'ai',\r\n        timestamp: new Date(),\r\n      };\r\n      setMessages((prev) => [...prev, aiMessage]);\r\n\r\n      // „Éá„Éê„ÉÉ„Ç∞ÊÉÖÂ†±ÔºàÈñãÁô∫Áí∞Â¢É„ÅÆ„ÅøÔºâ\r\n      if (process.env.NODE_ENV === 'development') {\r\n        console.log(`ÂøúÁ≠îÊôÇÈñì: ${(elapsedTime / 1000).toFixed(2)}Áßí`);\r\n      }\r\n    } catch (error) {\r\n      clearTimeout(timeoutId);\r\n      console.error('„É°„ÉÉ„Çª„Éº„Ç∏ÈÄÅ‰ø°„Ç®„É©„Éº:', error);\r\n      \r\n      let errorText = '‚ùå „Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü„ÄÇ';\r\n      if (error instanceof Error) {\r\n        if (error.message.includes('timeout') || error.message.includes('Network Error')) {\r\n          errorText = '‚è±Ô∏è „Çø„Ç§„É†„Ç¢„Ç¶„Éà„Åó„Åæ„Åó„Åü„ÄÇ„ÇÇ„ÅÜ‰∏ÄÂ∫¶„ÅäË©¶„Åó„Åè„Å†„Åï„ÅÑ„ÄÇ';\r\n        } else {\r\n          errorText = `‚ùå „Ç®„É©„Éº: ${error.message}`;\r\n        }\r\n      }\r\n      \r\n      const errorMessage: Message = {\r\n        id: `msg_${Date.now()}_error`,\r\n        text: errorText,\r\n        sender: 'ai',\r\n        timestamp: new Date(),\r\n      };\r\n      setMessages((prev) => [...prev, errorMessage]);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full\">\r\n      <div className=\"flex-1 overflow-hidden\">\r\n        <MessageList messages={messages} />\r\n        <div ref={messagesEndRef} />\r\n      </div>\r\n      <div className=\"mt-4\">\r\n        <MessageInput onSend={handleSend} disabled={isLoading} />\r\n      </div>\r\n      {isLoading && (\r\n        <div className=\"flex items-center justify-center gap-2 mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200\">\r\n          <div className=\"flex gap-1\">\r\n            <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\" style={{ animationDelay: '0ms' }}></div>\r\n            <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\" style={{ animationDelay: '150ms' }}></div>\r\n            <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\" style={{ animationDelay: '300ms' }}></div>\r\n          </div>\r\n          <span className=\"text-blue-600 font-medium\">AI„ÅåËÄÉ„Åà„Å¶„ÅÑ„Åæ„Åô...</span>\r\n          <span className=\"text-blue-400 text-sm\">ÔºàÈÄöÂ∏∏10-30Áßí„Åã„Åã„Çä„Åæ„ÅôÔºâ</span>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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"}}]
}