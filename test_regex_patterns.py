#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
æ­£è¦è¡¨ç¾ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒ†ã‚¹ãƒˆ
"""

import re

def test_repair_steps_patterns():
    """ä¿®ç†æ‰‹é †ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒ†ã‚¹ãƒˆ"""
    print("ğŸ§ª ä¿®ç†æ‰‹é †æ­£è¦è¡¨ç¾ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ†ã‚¹ãƒˆ")
    print("=" * 50)
    
    # ãƒ†ã‚¹ãƒˆç”¨ã®ä¿®ç†æ‰‹é †å†…å®¹
    repair_steps_content = """## ä¿®ç†æ‰‹é †

### 1. å•é¡Œç®‡æ‰€ã®ç‰¹å®š
- æ°´ã®æµã‚Œã‚’è¿½è·¡ã—ã¦æµ¸å…¥çµŒè·¯ã‚’ç‰¹å®š
- å¤–å´ã‹ã‚‰ã®æµ¸å…¥çµŒè·¯ç¢ºèªï¼ˆå±‹æ ¹ã€çª“æ ã€ãƒ‰ã‚¢å‘¨è¾ºï¼‰
- å†…å´ã‹ã‚‰ã®æ°´æ¼ã‚Œç¢ºèªï¼ˆé…ç®¡ã€ã‚¨ã‚¢ã‚³ãƒ³ãƒ€ã‚¯ãƒˆï¼‰
- é…ç®¡ã®æ°´æ¼ã‚Œç¢ºèªï¼ˆçµ¦æ°´ãƒ»æ’æ°´é…ç®¡ï¼‰

### 2. å®‰å…¨ç¢ºèªã¨æº–å‚™
- é«˜æ‰€ä½œæ¥­æ™‚ã®å®‰å…¨ç¢ºä¿ï¼ˆå®‰å…¨å¸¯ã®ä½¿ç”¨ï¼‰
- é›»æ°—ç³»çµ±ã¸ã®æ°´ã®ä¾µå…¥é˜²æ­¢
- ä½œæ¥­å·¥å…·ã®æº–å‚™ï¼ˆã‚·ãƒ¼ãƒªãƒ³ã‚°æã€ãƒ‘ãƒ†ã€ãƒ–ãƒ©ã‚·ç­‰ï¼‰
- ä¿è­·å…·ã®ç€ç”¨ï¼ˆæ‰‹è¢‹ã€ãƒã‚¹ã‚¯ã€å®‰å…¨å¸½ï¼‰"""
    
    # ä¿®æ­£ã•ã‚ŒãŸãƒ‘ã‚¿ãƒ¼ãƒ³
    patterns = [
        "## ä¿®ç†æ‰‹é †\\s*\\n(.*?)(?=\\n##|\\nâš ï¸|\\n\\*\\*|$)",
        "## è©³ç´°ä¿®ç†æ‰‹é †\\s*\\n(.*?)(?=\\n##|\\nâš ï¸|\\n\\*\\*|$)",
        "## æ‰‹é †\\s*\\n(.*?)(?=\\n##|\\nâš ï¸|\\n\\*\\*|$)",
        "## ä¿®ç†æ‰‹é †(.*?)(?=\\n##|\\nâš ï¸|\\n\\*\\*|$)",
        "## è©³ç´°ä¿®ç†æ‰‹é †(.*?)(?=\\n##|\\nâš ï¸|\\n\\*\\*|$)",
        "## æ‰‹é †(.*?)(?=\\n##|\\nâš ï¸|\\n\\*\\*|$)"
    ]
    
    print(f"ğŸ“„ ãƒ†ã‚¹ãƒˆå†…å®¹ï¼ˆæœ€åˆã®200æ–‡å­—ï¼‰:")
    print(repair_steps_content[:200])
    print("...")
    
    for i, pattern in enumerate(patterns, 1):
        print(f"\nğŸ” ãƒ‘ã‚¿ãƒ¼ãƒ³ {i}: {pattern}")
        match = re.search(pattern, repair_steps_content, re.DOTALL)
        if match:
            print(f"  âœ… ãƒãƒƒãƒæˆåŠŸ")
            extracted = match.group(1).strip()
            print(f"  ğŸ“„ æŠ½å‡ºå†…å®¹ï¼ˆæœ€åˆã®100æ–‡å­—ï¼‰: {extracted[:100]}...")
        else:
            print(f"  âŒ ãƒãƒƒãƒå¤±æ•—")

def test_warnings_patterns():
    """æ³¨æ„äº‹é …ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒ†ã‚¹ãƒˆ"""
    print("\nğŸ§ª æ³¨æ„äº‹é …æ­£è¦è¡¨ç¾ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ†ã‚¹ãƒˆ")
    print("=" * 50)
    
    # ãƒ†ã‚¹ãƒˆç”¨ã®æ³¨æ„äº‹é …å†…å®¹
    warnings_content = """## æ³¨æ„äº‹é …

âš ï¸ å®‰å…¨ç¬¬ä¸€ã§ä½œæ¥­ã‚’è¡Œã£ã¦ãã ã•ã„

- é«˜æ‰€ä½œæ¥­æ™‚ã¯å¿…ãšå®‰å…¨å¸¯ã‚’ä½¿ç”¨
- é›»æ°—ç³»çµ±ã¸ã®æ°´ã®ä¾µå…¥ã«æ³¨æ„
- å¿œæ€¥å‡¦ç½®å¾Œã¯å¿…ãšå°‚é–€æ¥­è€…ã«ã‚ˆã‚‹ç‚¹æ¤œã‚’å—ã‘ã‚‹
- ã‚·ãƒ¼ãƒªãƒ³ã‚°æã¯é©åˆ‡ãªç¨®é¡ã‚’é¸æŠã™ã‚‹
- ä½œæ¥­å‰ã«ã¯å¿…ãšé›»æºã‚’OFFã«ã™ã‚‹"""
    
    # ä¿®æ­£ã•ã‚ŒãŸãƒ‘ã‚¿ãƒ¼ãƒ³
    patterns = [
        "## æ³¨æ„äº‹é …\\s*\\n(.*?)(?=\\n##|\\n\\*\\*|$)",
        "## å®‰å…¨ä¸Šã®æ³¨æ„äº‹é …\\s*\\n(.*?)(?=\\n##|\\n\\*\\*|$)",
        "## æ³¨æ„\\s*\\n(.*?)(?=\\n##|\\n\\*\\*|$)",
        "âš ï¸ æ³¨æ„äº‹é …\\s*\\n(.*?)(?=\\n##|\\n\\*\\*|$)"
    ]
    
    print(f"ğŸ“„ ãƒ†ã‚¹ãƒˆå†…å®¹ï¼ˆæœ€åˆã®200æ–‡å­—ï¼‰:")
    print(warnings_content[:200])
    print("...")
    
    for i, pattern in enumerate(patterns, 1):
        print(f"\nğŸ” ãƒ‘ã‚¿ãƒ¼ãƒ³ {i}: {pattern}")
        match = re.search(pattern, warnings_content, re.DOTALL)
        if match:
            print(f"  âœ… ãƒãƒƒãƒæˆåŠŸ")
            extracted = match.group(1).strip()
            print(f"  ğŸ“„ æŠ½å‡ºå†…å®¹ï¼ˆæœ€åˆã®100æ–‡å­—ï¼‰: {extracted[:100]}...")
        else:
            print(f"  âŒ ãƒãƒƒãƒå¤±æ•—")

if __name__ == "__main__":
    print("ğŸš€ æ­£è¦è¡¨ç¾ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ†ã‚¹ãƒˆé–‹å§‹")
    print("=" * 60)
    
    test_repair_steps_patterns()
    test_warnings_patterns()
    
    print("\nğŸ‰ ãƒ†ã‚¹ãƒˆå®Œäº†ï¼")
