# インバーター異音の診断フロー

## データベース連携フロー

```
診断フローデータベース (NODE_DB_ID)
        ↓
修理ケースデータベース (CASE_DB_ID)
        ↓
部品・工具データベース (ITEM_DB_ID)
```

## 具体的な診断フロー

### 1. 診断フローデータベース (NODE_DB_ID)
**役割**: 段階的な質問で症状を特定

**インバーター異音の診断フロー例**:
```
開始ノード: "電装系" カテゴリ
    ↓
質問1: "インバーターから異音がしますか？"
    ↓
質問2: "どのような音ですか？"
    - ファンの音 → ファン故障の可能性
    - ブザー音 → 警告音の可能性
    - 振動音 → 内部部品の緩み
    ↓
質問3: "音の発生タイミングは？"
    - 常時 → ファン故障
    - 起動時のみ → 突入電流問題
    - 負荷時のみ → 過負荷問題
    ↓
終端ノード: 診断結果 + 関連修理ケースID
```

### 2. 修理ケースデータベース (CASE_DB_ID)
**役割**: 具体的な修理手順と部品情報を提供

**インバーター異音の修理ケース例**:
```
ケースID: IV-4
症状: ファンがうるさい/止まらない
修理手順: 
1. 吸排気口のホコリ除去
2. 温度センサー交換
3. 基板上のサーミスタ交換
必要な部品: 温度センサー、サーミスタ
必要な工具: はんだごて、マルチメーター
難易度: 中級者
```

### 3. 部品・工具データベース (ITEM_DB_ID)
**役割**: 必要な部品・工具の詳細情報を提供

**インバーター修理に必要な部品例**:
```
部品名: 温度センサー
カテゴリ: 電装系
価格: 3,000-5,000円
説明: インバーター内部温度監視用
メーカー: 各インバーターメーカー対応
型番: 車種・年式により異なる
```

## 実際の診断フロー例

### 「インバーターから異音がする」の場合

1. **診断フローデータベース**で段階的質問:
   - "どのような音ですか？"
   - "音の発生タイミングは？"
   - "負荷状況はどうですか？"

2. **診断結果**:
   - 診断名: "ファン故障"
   - 確信度: 85%
   - 緊急度: "要注意"

3. **修理ケースデータベース**から関連ケースを取得:
   - ケースIV-4: ファンがうるさい/止まらない
   - 修理手順、必要な部品・工具

4. **部品・工具データベース**から詳細情報:
   - 温度センサー: 3,000-5,000円
   - サーミスタ: 1,000-2,000円
   - はんだごて: 5,000-15,000円

## 費用目安の計算

**インバーター異音（ファン故障）の場合**:
- 部品代: 4,000-7,000円
- 工賃: 8,000-15,000円
- 合計: 12,000-22,000円

## データベース間の連携

### 診断フロー → 修理ケース
- 診断結果のカテゴリで関連ケースをフィルタリング
- 症状のキーワードマッチング

### 修理ケース → 部品・工具
- 必要な部品・工具のIDで関連アイテムを取得
- 価格・入手難易度の情報提供

## 改善された診断結果の表示

```
## 🔍 診断結果
診断名: インバーター内部ファン故障
確信度: 85%
緊急度: 要注意

## 💰 費用目安
部品代: 4,000-7,000円
工賃: 8,000-15,000円
合計: 12,000-22,000円

## 🛠️ 対処法
1. 吸排気口のホコリ除去（即座に実行）
2. 温度センサー交換（専門家に相談）
3. 基板上のサーミスタ交換（専門家に相談）

## ⚠️ 注意事項
内部基板の作業は感電の危険があります。
専門家への相談を強く推奨します。
```
